{{ $disabledURLs := slice "/tags" "/about/" "/contact/" "/terms/" "/privacy/" "/advertise/" "/guest-posts/" "/affiliate/" }}
{{ $currentPath := .Permalink }}
{{ $lowpriority := false }}
{{ range $disabledURLs }}
  {{ if (in $currentPath .) }}
    {{ $lowpriority = true }}
  {{ end }}
{{ end }}

{{ $baseURLs := slice
  "https://simeononsecurity.ch"
  "https://ar.simeononsecurity.ch"
  "https://bn.simeononsecurity.ch"
  "https://ca.simeononsecurity.ch"
  "https://de.simeononsecurity.ch"
  "https://es.simeononsecurity.ch"
  "https://fr.simeononsecurity.ch"
  "https://hi.simeononsecurity.ch"
  "https://it.simeononsecurity.ch"
  "https://ja.simeononsecurity.ch"
  "https://nl.simeononsecurity.ch"
  "https://pa.simeononsecurity.ch"
  "https://pl.simeononsecurity.ch"
  "https://pt.simeononsecurity.ch"
  "https://ro.simeononsecurity.ch"
  "https://ru.simeononsecurity.ch"
  "https://zh.simeononsecurity.ch"
}}

{{ $page := "" }}
{{ $currentPageTitle := "" }}
{{ $path := "" }}
{{ $dir := ""}}

{{ printf "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>" | safeHTML }}
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
         xmlns:xhtml="http://www.w3.org/1999/xhtml"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9
         http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">
  {{ range .Data.Pages }}
    {{ $page = . }}
    {{ $currentPageTitle = $page.Title }}
    {{ with .File }}
      {{ $path = $page.File.Path }}
      {{ $dir = $page.File.Dir }}
    {{ else }}
        {{ $path = .Path }}
    {{ end }}
    {{ $currentPageDir := path.Dir $path }}
    {{ $currentPageBaseName := path.Base $path }}
    {{ $ignore := or (hasPrefix .RelPermalink "/tags") (hasPrefix .RelPermalink "/categories") }}
    {{ $ignore = or $ignore (.Params.sitemap_ignore | default false) }}
    {{ if not $ignore }}
    <url>
      <title>{{ or $.Title $.Page.Title }}</title>
      <loc>{{ .Permalink }}</loc>
      {{ if not .Lastmod.IsZero }}
        <lastmod>{{ safeHTML (.Lastmod.Format "2006-01-02T15:04:05-07:00") }}</lastmod>
      {{ end }}


        {{ if or (eq $page.Section "tags") ($lowpriority)}}
                <changefreq>monthly</changefreq>
        {{ else }}
            {{ if or .IsSection .IsHome}}
                <changefreq>weekly</changefreq>
            {{ else }}
                {{ with .Sitemap.ChangeFreq }}
                <changefreq>{{ . }}</changefreq>
                {{ end }}
            {{ end }}
        {{ end }}

        {{ if or (eq $page.Section "tags") ($lowpriority)}}
            <priority>0.01</priority>
        {{ else }}
            {{ if or .IsSection .IsHome}}
                <priority>0.1</priority>
            {{ else }}
                {{ if gt .Sitemap.Priority 0.0 }}
                    <priority>{{ .Sitemap.Priority }}</priority>
                {{ end }}
            {{ end }}
        {{ end }}

      {{ if .Translations }}
        {{ range $translation := .Translations }}
          <xhtml:link
            rel="alternate"
            hreflang="{{ $translation.Lang }}"
            href="{{ $translation.Permalink }}"
          />
        {{ end }}
      {{ else }}
          {{ range $baseURLs }}
              {{ $baseURL := . }}
              {{ $sitelang := "" }}
              {{ $hreflang := "" }}
              {{ $localizedURL := "" }}
              {{ if eq $baseURL "https://simeononsecurity.ch" }}
                  {{ $sitelang = "English" }}
                  {{ $hreflang = "en" }}
              {{ else if eq $baseURL "https://ar.simeononsecurity.ch" }}
                  {{ $sitelang = "العربية" }}
                  {{ $hreflang = "ar" }}
              {{ else if eq $baseURL "https://bn.simeononsecurity.ch" }}
                  {{ $sitelang = "বাংলা" }}
                  {{ $hreflang = "bn" }}
              {{ else if eq $baseURL "https://ca.simeononsecurity.ch" }}
                  {{ $sitelang = "Català" }}
                  {{ $hreflang = "ca" }}
              {{ else if eq $baseURL "https://de.simeononsecurity.ch" }}
                  {{ $sitelang = "Deutsch" }}
                  {{ $hreflang = "de" }}
              {{ else if eq $baseURL "https://es.simeononsecurity.ch" }}
                  {{ $sitelang = "Español" }}
                  {{ $hreflang = "es" }}
              {{ else if eq $baseURL "https://fr.simeononsecurity.ch" }}
                  {{ $sitelang = "Français" }}
                  {{ $hreflang = "fr" }}
              {{ else if eq $baseURL "https://hi.simeononsecurity.ch" }}
                  {{ $sitelang = "हिन्दी" }}
                  {{ $hreflang = "hi" }}
              {{ else if eq $baseURL "https://it.simeononsecurity.ch" }}
                  {{ $sitelang = "Italiano" }}
                  {{ $hreflang = "it" }}
              {{ else if eq $baseURL "https://ja.simeononsecurity.ch" }}
                  {{ $sitelang = "日本語" }}
                  {{ $hreflang = "ja" }}
              {{ else if eq $baseURL "https://nl.simeononsecurity.ch" }}
                  {{ $sitelang = "Nederlands" }}
                  {{ $hreflang = "nl" }}
              {{ else if eq $baseURL "https://pa.simeononsecurity.ch" }}
                  {{ $sitelang = "ਪੰਜਾਬੀ" }}
                  {{ $hreflang = "pa" }}
              {{ else if eq $baseURL "https://pt.simeononsecurity.ch" }}
                  {{ $sitelang = "Português" }}
                  {{ $hreflang = "pt" }}
              {{ else if eq $baseURL "https://pl.simeononsecurity.ch" }}
                  {{ $sitelang = "Polski" }}
                  {{ $hreflang = "pl" }}
              {{ else if eq $baseURL "https://ro.simeononsecurity.ch" }}
                  {{ $sitelang = "Română" }}
                  {{ $hreflang = "ro" }}
              {{ else if eq $baseURL "https://ru.simeononsecurity.ch" }}
                  {{ $sitelang = "Русский" }}
                  {{ $hreflang = "ru" }}
              {{ else if eq $baseURL "https://zh.simeononsecurity.ch" }}
                  {{ $sitelang = "中文" }}
                  {{ $hreflang = "zh" }}
              {{ end }}
              {{ $localizedURL = printf "%s%s" $baseURL $page.RelPermalink }}
              {{ if or $page.IsHome $page.IsSection (in $page.Type "section") }}
                  <xhtml:link rel="alternate" title="{{ $currentPageTitle }} in {{ $sitelang }}" hreflang="{{ $hreflang }}" href="{{ $localizedURL }}" />
              {{ else }}
                  {{ $localizedFilePath := printf "/content/%s/index.%s.md" $currentPageDir $hreflang }}
                  {{ $localizedFilePath2 := printf "/content/%s/index.%s.html" $currentPageDir $hreflang }}
                  {{ $localizedFilePath3 := printf "/content/%s/_index.%s.md" $currentPageDir $hreflang }}
                  {{ $localizedFilePath4 := printf "/content/%s/_index.%s.html" $currentPageDir $hreflang }}
                  {{ $localizedFileExists := fileExists $localizedFilePath }}
                  {{ $localizedFileExists2 := fileExists $localizedFilePath2 }}
                  {{ $localizedFileExists3 := fileExists $localizedFilePath3 }}
                  {{ $localizedFileExists4 := fileExists $localizedFilePath4 }}
                  {{ if or (eq $baseURL "https://simeononsecurity.ch") $localizedFileExists $localizedFileExists2 $localizedFileExists3 $localizedFileExists4 }}
                      <xhtml:link rel="alternate" title="{{ $currentPageTitle }} in {{ $sitelang }}" hreflang="{{ $hreflang }}" href="{{ $localizedURL }}" />
                  {{ end }}
              {{ end }}
          {{ end }}
        {{ end }}
    </url>
    {{ end }}
  {{ end }}
</urlset>
