<!--
If you want to include any custom html just before </body>, put it in /layouts/partials/extended_footer.html
Do not put anything in this file - it's only here so that hugo won't throw an error if /layouts/partials/extended_footer.html doesn't exist.
-->

<script src="{{ "assets/main.js" | absURL }}"></script>

{{ $disabledURLs := slice "/about" "/contact" "/terms" "/privacy" }}
{{ $currentPath := .Permalink }}
{{ $disablePrism := false }}
{{ range $disabledURLs }}
  {{ if (in $currentPath .) }}
    {{ $disablePrism = true }}
  {{ end }}
{{ end }}
{{ if not $disablePrism }}
  {{ if not (eq .Params.Comments.enable false) }}
    {{ if not .IsPage}}
      <script async src="{{ "assets/prism.js" | absURL }}"></script>
    {{ end }}
  {{ end }}
{{ end }}

<!-- Scroll to Top Button -->
<button onclick="topFunction()" id="myBtn" title="Go to top">^</button>

<script defer>
  // Get the button element
  const mybutton = document.getElementById("myBtn");

  // Add a scroll event listener to the window
  window.addEventListener('scroll', scrollFunction);

  // Define the scroll function
  function scrollFunction() {
    mybutton.style.display = (window.scrollY > 20) ? 'block' : 'none';
  }

  // Define the topFunction
  function topFunction() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }
</script>

{{ $style := resources.Get "style-append.css" | resources.Minify }}
<noscript><link defer rel="stylesheet" href="{{ $style.Permalink }}"></noscript>

<!-- Load Service Worker -->
{{ partialCached "load_service_worker.html" . }}

<!-- Load 3rd Party JS -->
{{ if not $.Site.IsServer }}
    <!-- Global site tag (gtag.js) - Google Analytics -->
    {{ template "_internal/google_tag_manager.html" . }}

    <!-- Microsoft Clarity -->
    {{ template "_internal/microsoft_clarity.html" . }}

    <!-- Ads JS Load -->
    {{ partialCached "googleadsload.html" . }}

    <!-- Load Info Links -->
    {{ partialCached "infolinks.html" . }}

    <!-- Load Instant Page -->
    {{ partial "instantpage.html" . }}
{{ end }}

