<link rel="alternate" type="application/rss+xml" title="simeononsecurity sitemap" href="/sitemap.xml"/>
<link rel="alternate" type="application/rss+xml" title="simeononsecurity rss" href="/rss.xml"/>

<script aync>
const divInstall = document.getElementById('installContainer');
const butInstall = document.getElementById('butInstall');

if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
      console.log('Service worker registered successfully: ', registration);
    }, function(error) {
      console.log('Service worker registration failed: ', error);
    });
  });
}

// Service worker file: service-worker.js
self.addEventListener('install', function(event) {
  event.waitUntil(
    caches.open('static-assets-v1').then(function(cache) {
      return cache.addAll(staticAssets);
    })
  );
});

self.addEventListener('fetch', function(event) {
  event.respondWith(
    caches.match(event.request).then(function(response) {
      return response || fetch(event.request);
    })
  );
});

/* Only register a service worker if it's supported */
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/service-worker.js');
}

/**
 * Warn the page must be served over HTTPS
 * The `beforeinstallprompt` event won't fire if the page is served over HTTP.
 * Installability requires a service worker with a fetch event handler, and
 * if the page isn't served over HTTPS, the service worker won't load.
 */
if (window.location.protocol === 'http:') {
  const requireHTTPS = document.getElementById('requireHTTPS');
  const link = requireHTTPS.querySelector('a');
  link.href = window.location.href.replace('http://', 'https://');
  requireHTTPS.classList.remove('hidden');
}
</script>
