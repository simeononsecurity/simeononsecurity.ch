<!-- preload third-party dns for js -->
<link rel="preconnect" href="https://pagead1.googlesyndication.com" />
<link rel="preconnect" href="https://pagead2.googlesyndication.com" />
<link rel="preconnect" href="https://www.google-analytics.com" />
<link rel="preconnect" href="https://google-analytics.com" />
<link rel="preconnect" href="https://ws-na.amazon-adsystem.com" />
<link rel="preconnect" href="https://amazon-adsystem.com" />
<link rel="preconnect" href="https://cdn.ampproject.org" />
<link rel="preconnect" href="https://cdn.jsdelivr.net" />
<link rel="preconnect" href="https://fonts.gstatic.com" />
<link rel="preconnect" href="https://gstatic.com" />
<link rel="preconnect" href="https://googleads.g.doubleclick.net" />
<link rel="preconnect" href="https://tpc.googlesyndication.com" />
<link rel="preconnect" href="https://googletagservices.com" />
<link rel="preconnect" href="https://utteranc.es" />
<link rel="preconnect" href="https://static.cloudflareinsights.com" />

<!-- preload and prefetch first-party js -->
<link rel="prefetch" href="/service-worker.js" as="script" type="text/javascript"/> 
<link rel="prefetch" href="{{ "assets/main.js" | absURL }}" as="script" type="text/javascript"/>
<link rel="prefetch" href="{{ "assets/prism.js" | absURL }}" as="script" type="text/javascript"/>

<!-- preload and prefetch third-party js -->
<link rel="prefetch" href="https://www.google-analytics.com/analytics.js" as="script" type="text/javascript"/> 
<link rel="prefetch" href="https://cdn.jsdelivr.net/npm/ga-lite@2/dist/ga-lite.min.js" as="script" type="text/javascript"/> 
<link rel="prefetch" href="https://www.googletagmanager.com/gtag/js?id=G-W3SL745QY6" as="script" type="text/javascript"/>
<link rel="prefetch" href="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4092442123207538" as="script" type="text/javascript"/> 
<link rel="prefetch" href="https://ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&Operation=GetScript&ID=OneJS&WS=1&MarketPlace=US" as="script" type="text/javascript"/>
<link rel="prefetch" href="https://utteranc.es/client.js" as="script" type="text/javascript"/>

<!-- preload images -->
{{ if .Params.UseRelativeCover }}
<link rel="preload" as="image" href="{{ (printf "%s%s" .Permalink .Params.Cover ) }}"/>
{{ else }}
<link rel="preload" as="image" href="{{ .Params.Cover | absURL }}"/>
{{ end }}

<!-- Fonts -->
<link href="{{ (resources.Get "fonts/Inter-Italic.woff2").RelPermalink }}" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="{{ (resources.Get "fonts/Inter-Regular.woff2").RelPermalink }}" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="{{ (resources.Get "fonts/Inter-Medium.woff2").RelPermalink }}" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="{{ (resources.Get "fonts/Inter-MediumItalic.woff2").RelPermalink }}" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="{{ (resources.Get "fonts/Inter-Bold.woff2").RelPermalink }}" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="{{ (resources.Get "fonts/Inter-BoldItalic.woff2").RelPermalink }}" rel="preload" type="font/woff2" as="font" crossorigin="">

<!-- Theme CSS -->
<link rel="stylesheet" href="{{ "assets/style.css" | absURL }}" async/>

<!-- Custom CSS to override theme properties (/static/style.css) -->
<link rel="stylesheet" href="{{ "style.css" | absURL }}" async/>

<!-- Icons -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="{{ "img/apple-touch-icon-144-precomposed.png" | absURL }}" />
<link rel="apple-touch-icon" sizes="192x192" href="{{ "img/apple-touch-icon-192.png" | absURL }}" />
<link rel="icon" type="image/png" sizes="144x144" href="{{ "img/apple-touch-icon-144-precomposed.png" | absURL }}">
<link rel="icon" type="image/png" sizes="192x192" href="{{ "img/apple-touch-icon-192.png" | absURL }}">
<link rel="shortcut icon" href="{{ "img/favicon.png" | absURL }}" />

<!-- add a <link> tag to all the pages for manifest.json  -->
<link rel="manifest" href="{{ "manifest.json" | absURL }}">

<!-- mastodon verification  -->
<a rel="me" title="mastodon verification" href="https://mastodon.world/@simeononsecurity"></a>

<!-- RSS | JSON -->
{{ range .AlternativeOutputFormats -}}
  {{ printf `<link rel="%s" type="%s" href="%s" title="%s" />` .Rel .MediaType.Type .RelPermalink $.Site.Title | safeHTML }}
{{ end -}}
<link href="https://simeononsecurity.ch/rss.xml" rel="alternate" type="application/rss+xml" title="{{ $.Site.Title }}" />
<link href="https://simeononsecurity.ch/rss.xml" rel="feed" type="application/rss+xml" title="{{ $.Site.Title }}" />
<link href="https://feeds.feedburner.com/simeononsecurity" rel="feed" type="application/rss+xml" title="{{ $.Site.Title }}" />

<script async>
const divInstall = document.getElementById('installContainer');
const butInstall = document.getElementById('butInstall');

// Register the service worker
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
      console.log('Service Worker registration successful with scope: ', registration.scope);
    }, function(err) {
      console.log('Service Worker registration failed: ', err);
    });
  });
}

/**
 * Warn the page must be served over HTTPS
 * The `beforeinstallprompt` event won't fire if the page is served over HTTP.
 * Installability requires a service worker with a fetch event handler, and
 * if the page isn't served over HTTPS, the service worker won't load.
 */
if (window.location.protocol === 'http:') {
  const requireHTTPS = document.getElementById('requireHTTPS');
  const link = requireHTTPS.querySelector('a');
  link.href = window.location.href.replace('http://', 'https://');
  requireHTTPS.classList.remove('hidden');
}
</script>