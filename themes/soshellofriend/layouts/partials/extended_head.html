<!-- preload third-party dns for js -->
<link rel="preconnect" href="https://pagead1.googlesyndication.com" />
<link rel="preconnect" href="https://pagead2.googlesyndication.com" />
<link rel="preconnect" href="https://www.google-analytics.com" />
<link rel="preconnect" href="https://ws-na.amazon-adsystem.com" />
<link rel="preconnect" href="https://amazon-adsystem.com" />
<link rel="preconnect" href="https://cdn.ampproject.org" />
<link rel="preconnect" href="https://cdn.jsdelivr.net" />

<!-- preload first-party js
<link rel="preload" href="{{ "assets/main.js" | absURL }}" as="script" type="text/javascript"/>
<link rel="preload" href="{{ "assets/prism.js" | absURL }}" as="script" type="text/javascript"/> -->

<!-- Fonts -->
<link href="{{ (resources.Get "fonts/Inter-Italic.woff2").RelPermalink }}" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="{{ (resources.Get "fonts/Inter-Regular.woff2").RelPermalink }}" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="{{ (resources.Get "fonts/Inter-Medium.woff2").RelPermalink }}" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="{{ (resources.Get "fonts/Inter-MediumItalic.woff2").RelPermalink }}" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="{{ (resources.Get "fonts/Inter-Bold.woff2").RelPermalink }}" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="{{ (resources.Get "fonts/Inter-BoldItalic.woff2").RelPermalink }}" rel="preload" type="font/woff2" as="font" crossorigin="">

<!-- Theme CSS -->
<link rel="stylesheet" href="{{ "assets/style.css" | absURL }}" async/>

<!-- Custom CSS to override theme properties (/static/style.css) -->
<link rel="stylesheet" href="{{ "style.css" | absURL }}" async/>

<!-- Icons -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="{{ "img/apple-touch-icon-144-precomposed.png" | absURL }}" />
<link rel="apple-touch-icon" sizes="192x192" href="{{ "img/apple-touch-icon-192.png" | absURL }}" />
<link rel="icon" type="image/png" sizes="144x144" href="{{ "img/apple-touch-icon-144-precomposed.png" | absURL }}">
<link rel="icon" type="image/png" sizes="192x192" href="{{ "img/apple-touch-icon-192.png" | absURL }}">
<link rel="shortcut icon" href="{{ "img/favicon.png" | absURL }}" />

<!-- add a <link> tag to all the pages for manifest.json  -->
<link rel="manifest" href="{{ "manifest.json" | absURL }}">

<a rel="me" title="mastodon verification" href="https://mastodon.world/@simeononsecurity"></a>

<!-- RSS | JSON -->
{{ range .AlternativeOutputFormats -}}
  {{ printf `<link rel="%s" type="%s" href="%s" title="%s" />` .Rel .MediaType.Type .RelPermalink $.Site.Title | safeHTML }}
{{ end -}}
<link href="https://simeononsecurity.ch/rss.xml" rel="alternate" type="application/rss+xml" title="{{ $.Site.Title }}" />
<link href="https://simeononsecurity.ch/rss.xml" rel="feed" type="application/rss+xml" title="{{ $.Site.Title }}" />

<script aync>
const divInstall = document.getElementById('installContainer');
const butInstall = document.getElementById('butInstall');

// Register the service worker
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
      console.log('Service Worker registration successful with scope: ', registration.scope);
      Notification.requestPermission().then(function(permission) {
        if (permission === 'granted') {
          console.log('Notification Permission Was Granted');
        }
      });
    }, function(err) {
      console.log('Service Worker registration failed: ', err);
    });
  });
}

/**
 * Warn the page must be served over HTTPS
 * The `beforeinstallprompt` event won't fire if the page is served over HTTP.
 * Installability requires a service worker with a fetch event handler, and
 * if the page isn't served over HTTPS, the service worker won't load.
 */
if (window.location.protocol === 'http:') {
  const requireHTTPS = document.getElementById('requireHTTPS');
  const link = requireHTTPS.querySelector('a');
  link.href = window.location.href.replace('http://', 'https://');
  requireHTTPS.classList.remove('hidden');
}
</script>

<script async custom-element="amp-install-serviceworker" src="https://cdn.ampproject.org/v0/amp-install-serviceworker-0.1.js"></script>
<amp-install-serviceworker src="https://simeononsecurity.ch/amp-sw.js" data-iframe-src="https://simeononsecurity.ch/install-amp-sw.html" layout="nodisplay"></amp-install-serviceworker>