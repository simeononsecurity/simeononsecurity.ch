---
title: "HSTS Preloading Как повысить безопасность сайта: Пошаговое руководство"
date: 2023-08-20
toc: true
draft: false
description: "Узнайте, как повысить безопасность сайта и доверие пользователей, предварительно загрузив настройки HSTS в Chrome и Firefox. Следуйте нашему пошаговому руководству для беспрепятственного внедрения."
cover: "/img/cover/enhanced-website-security.png"
coverAlt: "Иллюстрация веб-сайта, закрытого замком в карикатурном стиле, символизирует повышенную безопасность и защиту от киберугроз."
coverCaption: "Укрепите защиту своего сайта, внедрите предварительную загрузку HSTS."
---

## **Повышение безопасности сайта с помощью предварительной загрузки HSTS: Пошаговое руководство**

HTTP Strict Transport Security (HSTS) - это **важнейший механизм безопасности**, обеспечивающий на веб-сайтах использование HTTPS-соединений для **защиты пользователей от потенциальных угроз безопасности**. Предварительная загрузка настроек HSTS в Chrome и Firefox позволяет **усилить безопасность сайтов** и повысить **доверие пользователей**. В этом подробном руководстве мы рассмотрим **основные шаги** для успешной предварительной загрузки настроек HSTS и дадим **полезные рекомендации** для оптимизации безопасности.

______

### **Понимание предварительной загрузки HSTS**

**HSTS Preloading** - это процесс **внесения домена вашего сайта** в списки предварительной загрузки основных браузеров. После добавления эти браузеры будут **автоматически обеспечивать HTTPS-соединения** для вашего домена и всех поддоменов. Это обеспечивает безопасный доступ пользователей к вашему сайту, снижая риск **атак типа "человек посередине "** и несанкционированного подслушивания. Для получения более подробной информации о предварительной загрузке HSTS можно обратиться к официальному документу [documentation](https://hstspreload.org/)

______

{{< inarticle-dark >}}

______

### **Требования к оформлению**

Прежде чем отправить свой домен на предварительную загрузку HSTS, убедитесь, что ваш сайт соответствует следующим **основным требованиям**:

1. **Действительный сертификат**: Ваш сайт должен иметь **действительный SSL- или TLS-сертификат** для обеспечения **безопасных HTTPS-соединений**.

2. Перенаправление **HTTP на HTTPS**: Убедитесь, что все **HTTP-запросы перенаправляются** на их **HTTPS-аналоги**, когда ваш сайт прослушивает порт 80.

3. **HTTPS для всех поддоменов**: Все поддомены вашего сайта должны **поддерживать HTTPS-соединения**, чтобы иметь право на предварительную загрузку HSTS.

4. **HSTS-заголовок на базовом домене**: Включите в базовый домен заголовок **HSTS** для запросов HTTPS со следующими настройками:
   - `max-age` должно быть **не менее 31536000 секунд** (1 год).
   - The `includeSubDomains` директива должна быть указана для включения всех поддоменов.
   - Для включения всех поддоменов необходимо указать директиву `preload` директива должна быть указана для запроса включения в список предварительной загрузки.

Ниже приведен пример корректного заголовка HSTS:

```http
Strict-Transport-Security: max-age=63072000; includeSubDomains; preload
```

______

### **Как предварительно загрузить настройки HSTS**.

Если ваш сайт **полностью поддерживает HTTPS** и соответствует вышеуказанным требованиям, выполните следующие **важные шаги** для успешной предварительной загрузки настроек HSTS:

1. **Проверьте поддомены**: Убедитесь, что все **поддомены вашего сайта** корректно работают по протоколу HTTPS, обеспечивая бесперебойную работу с сайтом.

2. **Постепенное наращивание**: Чтобы проверить и устранить возможные проблемы, добавьте заголовок **HSTS** в ответы HTTPS с **низким уровнем `max-age` значение** (например, 300 секунд). Постепенно увеличивайте значение `max-age` стоимость поэтапно:
   - 5 минут: `max-age=300; includeSubDomains`
   - 1 неделя: `max-age=604800; includeSubDomains`
   - 1 месяц: `max-age=2592000; includeSubDomains`

3. **Мониторинг показателей**: На каждом этапе **внимательно следите за показателями** вашего сайта, включая трафик и доходы, чтобы выявить и устранить любые проблемы, прежде чем переходить к следующему этапу.

4. **Увеличить максимальный возраст до 2 лет**: После того как вы **убедитесь, что проблем больше нет**, установите значение `max-age` до **2 лет (63072000 секунд)** и добавьте `preload` директива к заголовку HSTS:
```http
Strict-Transport-Security: max-age=63072000; includeSubDomains; preload
```

5. **Представить свой сайт**: После реализации 2-летнего `max-age` настройки, **представьте свой сайт** в список предварительной загрузки HSTS, используя форму, доступную на сайте [hstspreload.org](https://hstspreload.org/) Обратите внимание, что включение в список предварительной загрузки может занять несколько месяцев, прежде чем пользователи получат обновление Chrome.
______

### **Опция для предварительной загрузки HSTS: Расширение возможностей операторов сайтов**

Поддержка предварительной загрузки HSTS - это **отличная практика безопасности**, повышающая защиту сайта. Однако это должно быть **опт-ин решение** для операторов сайта. Если вы предоставляете **советы по настройке HTTPS** или предлагаете опцию включения HSTS, **избегайте включения опции `preload` директива по умолчанию**. Такой подход позволяет избежать непреднамеренного включения в список предварительной загрузки, что может привести к затруднению доступа к некоторым поддоменам.

Чтобы обеспечить бесперебойную работу, **информируйте операторов сайтов** о **долгосрочных последствиях** предварительной загрузки и подчеркните **важность выполнения всех требований** перед включением HSTS для своего домена.

______

### **Исключение из списка предзагрузки: Обдуманное решение**

Включение в список предварительной загрузки - это **постоянное решение**, которое нельзя легко отменить. Однако если вы столкнулись с **сильными техническими или экономическими причинами**, препятствующими поддержке HTTPS для определенных поддоменов, у вас есть возможность запросить **исключение из списка предзагрузки Chrome** с помощью команды [removal form](https://hstspreload.org/removal/)

Убедитесь, что вы тщательно оценили все последствия, прежде чем принимать это важное решение.
______

{{< inarticle-dark >}}

______

### **Более безопасный просмотр начинается с предварительной загрузки HSTS**

В заключение следует отметить, что предварительная загрузка настроек HSTS в Chrome и Firefox - это **активный шаг** к повышению безопасности просмотра веб-страниц для ваших пользователей. Обеспечивая **усиление HTTPS-соединений**, вы **защищаете конфиденциальные данные** и укрепляете **доверие** среди своих посетителей. Следуйте приведенным выше **инструкциям** для успешной **загрузки настроек HSTS** и наслаждайтесь **улучшенной безопасностью сайта**.

______

### Ссылки

1. [Chromium - HTTP Strict Transport Security (HSTS)](https://www.chromium.org/hsts/)
2. [HSTS Preload Submission](https://hstspreload.org/)
3. [Mozilla Web Security Guidelines](https://infosec.mozilla.org/guidelines/web_security)
4. [Google Web Fundamentals - Security](https://developers.google.com/web/fundamentals/security/)
