---
title: "HSTSプリロード ウェブサイトのセキュリティを強化する方法：ステップ・バイ・ステップ・ガイド"
date: 2023-08-20
toc: true
draft: false
description: "ChromeとFirefoxにHSTS設定をプリロードすることで、Webサイトのセキュリティとユーザーの信頼を向上させる方法をご紹介します。シームレスな実装のためのステップバイステップガイドに従ってください。"
cover: "/img/cover/enhanced-website-security.png"
coverAlt: "セキュリティの強化やサイバー脅威からの保護を表す、ロックで守られたウェブサイトの漫画風イラスト。"
coverCaption: "ウェブサイトの防御を強化し、HSTSプリロードを採用しましょう。"
---

## HSTS プリロードでウェブサイトのセキュリティを強化：ステップバイステップガイド**

HTTP Strict Transport Security (HSTS)は、**重要なセキュリティメカニズム**であり、WebサイトがHTTPS接続を実施することで、**潜在的なセキュリティ脅威**からユーザーを保護します。ChromeとFirefoxにHSTSの設定をプリロードすることで、**ウェブサイトのセキュリティを強化**し、**ユーザーの信頼**を築くことができます。この包括的なガイドでは、HSTS設定のプリロードを成功させるための**重要な手順**を説明し、セキュリティを最適化するための**有益な推奨事項**を提供します。

______

### HSTSプリロードを理解する

**HSTSプリロード**とは、**あなたのウェブサイトのドメイン**を主要ブラウザのプリロードリストに登録するプロセスです。一度追加されると、これらのブラウザは、あなたのドメインとすべてのサブドメインに対して**自動的にHTTPS接続**を強制します。これにより、ユーザーは常に安全にウェブサイトにアクセスできるようになり、**中間者攻撃**や不正な盗聴のリスクを軽減できます。HSTSプリロードの詳細については、公式の [documentation](https://hstspreload.org/)

______

{{< inarticle-dark >}}

______

### 提出書類

HSTSプリロードのためにドメインを提出する前に、ウェブサイトが以下の**必須要件**を満たしていることを確認してください：

1.**有効な証明書**：有効な証明書**: **安全なHTTPS接続**を有効にするには、**有効なSSLまたはTLS証明書**を提供する必要があります。

2.**HTTPからHTTPSへのリダイレクト**：あなたのウェブサイトがポート80でリッスンしているとき、すべての**HTTPリクエストが**HTTPS対応**にリダイレクト**されることを確認してください。

3.すべてのサブドメインの**HTTPS**：HSTSプリロードの対象となるには、ウェブサイトのすべてのサブドメインが**HTTPS接続**をサポートする必要があります。

4.ベースドメインの**HSTSヘッダー**：ベースドメイン上の**HSTSヘッダー**: HTTPSリクエスト用の**HSTSヘッダー**を、以下の設定でベースドメインに含めます：
   - `max-age`は少なくとも31536000秒**（1年）でなければならない。
   - また `includeSubDomains`ディレクティブを指定しなければなりません。
   - ディレクティブは `preload`ディレクティブを指定しなければなりません。

以下に有効なHSTSヘッダの例を示す：

```http
Strict-Transport-Security: max-age=63072000; includeSubDomains; preload
```

______

### HSTS設定のプリロード方法

あなたのウェブサイトが**完全にHTTPS**にコミットしており、上記の要件を満たしている場合は、以下の**重要な手順**に従って、HSTS設定のプリロードを成功させてください：

1.1.**サブドメインを調べる**：サブドメインの検証**：ウェブサイトのすべての**サブドメイン**がHTTPS上で正しく動作し、ユーザーにシームレスなブラウジング体験を提供できることを確認してください。

2.**段階的なレベルアップ**：潜在的な問題をテストし修正するために、HTTPSレスポンスに**HSTSヘッダー**を**低 `max-age`値**（例：300秒）。徐々に `max-age`段階的な価値
   - 5分 `max-age=300; includeSubDomains`
   - 1週間 `max-age=604800; includeSubDomains`
   - 1ヶ月 `max-age=2592000; includeSubDomains`

3.**メトリクスを監視する各ステージでは、トラフィックや収益など、ウェブサイトの指標**を綿密に監視し、次のステージに進む前に問題を特定して対処します。

4.**最大年齢を2年にする**：これ以上問題がないと**確信したら、**最大年齢を2年に設定する。 `max-age`を**2年(63072000秒)**に加算してください。 `preload`ディレクティブをHSTSヘッダに追加する：
```http
Strict-Transport-Security: max-age=63072000; includeSubDomains; preload
```

5.**あなたのサイトを提出**：2年間の `max-age`設定後、以下のフォームを使用して、HSTSプリロード・リストにサイトを**送信してください。 [hstspreload.org](https://hstspreload.org/)プリロードリストへの掲載は、クロームアップデートを行ったユーザーに届くまで数ヶ月かかる場合があります。
______

### HSTSプリロードのオプトイン：サイト運営者に力を与える

HSTSプリロードのサポートは、ウェブサイトの保護を強化する**優れたセキュリティ対策**です。しかし、サイト運営者にとっては、**オプトイン**の決定事項**であるべきです。HTTPS設定のアドバイス**を提供する場合、またはHSTSを有効にするオプションを提供する場合は、**HSTSを有効にするためのオプションを含めることは避けてください。 `preload`ディレクティブをデフォルトで使用します** 。この方法は、特定のサブドメインへのアクセスを困難にする、 予期せぬプリロードリストへのインクルードを防ぎます。

スムーズなエクスペリエンスを保証するために、**サイト運営者**にプリロードの**長期的な影響**を伝え、**ドメインのHSTSを有効にする前に、すべての要件**を満たすことの重要性を強調してください。

______

### プリロードリストからの削除：意図的な決定

プリロードリストへの掲載は、**恒久的な決定**であり、簡単に取り消すことはできません。ただし、特定のサブドメインの HTTPS サポートを妨げるような **強い技術的またはコスト関連の理由** が発生した場合は、**Chrome のプリロード リストからの削除を要求するオプションがあります。 [removal form](https://hstspreload.org/removal/)

この重大な決断を下す前に、その意味するところを慎重に検討してください。
______

{{< inarticle-dark >}}

______

### より安全なブラウジングはHSTSプリロードから**始まる

結論として、ChromeとFirefoxでHSTS設定をプリロードすることは、ユーザーにとってより安全なウェブ閲覧体験に向けた**積極的な**一歩です。HTTPS接続を**強化**することで、**機密データ**を保護し、**訪問者の間で**信頼**を築くことができます。上記の**ガイドライン**に従って、**HSTS設定のプリロード**を成功させ、**強化されたウェブサイトのセキュリティ**をお楽しみください。

______

### 参考文献

1. [Chromium - HTTP Strict Transport Security (HSTS)](https://www.chromium.org/hsts/)
2. [HSTS Preload Submission](https://hstspreload.org/)
3. [Mozilla Web Security Guidelines](https://infosec.mozilla.org/guidelines/web_security)
4. [Google Web Fundamentals - Security](https://developers.google.com/web/fundamentals/security/)
