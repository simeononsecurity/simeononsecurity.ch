---
title: "Устранение уязвимости DNS-сервера Windows с помощью KB4569509 — критическое исправление RCE"
date: 2020-07-25
---

[KB4569509: Guidance for DNS Server Vulnerability CVE-2020-1350](https://support.microsoft.com/en-us/help/4569509/windows-dns-server-remote-code-execution-vulnerability)

## Введение

14 июля 2020 г. корпорация Майкрософт выпустила обновление для системы безопасности для устранения проблемы, описанной в CVE-2020-1350 | Уязвимость удаленного выполнения кода DNS-сервера Windows. В этом бюллетене описывается критическая уязвимость удаленного выполнения кода (RCE), которая затрагивает серверы Windows, настроенные для выполнения роли DNS-сервера. Мы настоятельно рекомендуем администраторам серверов установить обновление для системы безопасности при первой же возможности.

Обходной путь на основе реестра может использоваться для защиты уязвимого сервера Windows, и его можно реализовать без перезапуска сервера администратором. Из-за непостоянства этой уязвимости администраторам может потребоваться реализовать обходной путь, прежде чем устанавливать обновление для системы безопасности, чтобы иметь возможность обновлять свои системы, используя стандартную частоту развертывания.


## Обходной путь

**Необязательно:** Загрузите скрипт обходного пути с веб-сайта[GitHub Repository](https://github.com/simeononsecurity/CVE-2020-1350-Fix)


Чтобы обойти эту уязвимость, внесите следующее изменение в реестр, чтобы ограничить размер самого большого разрешенного входящего пакета ответа DNS на основе TCP:

Подраздел: HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DNS\Parameters

Значение: TcpReceivePacketSize

Тип: двойное слово

Данные значения: 0xFF00

**Примечания:**

    Значение данных по умолчанию (также максимальное) = 0xFFFF.

    Рекомендуемое значение данных = 0xFF00 (на 255 байт меньше максимального).

    Чтобы изменения в реестре вступили в силу, необходимо перезапустить службу DNS. Для этого выполните следующую команду в командной строке с повышенными привилегиями:

```net stop dns && net start dns```


## Важная информация об этом обходном пути
Пакеты ответов DNS на основе TCP, превышающие рекомендуемое значение, будут отбрасываться без ошибок. Поэтому возможно, что на некоторые вопросы не будет ответа. Это может привести к непредвиденному сбою. Этот обходной путь негативно повлияет на DNS-сервер только в том случае, если он получит действительные ответы TCP, размер которых превышает разрешенный в предыдущем способе устранения (более 65 280 байт).

Уменьшенное значение вряд ли повлияет на стандартные развертывания или рекурсивные запросы. Однако в данной среде может существовать нестандартный вариант использования. Чтобы определить, не повлияет ли этот обходной путь неблагоприятно на реализацию сервера, следует включить ведение журнала диагностики и зафиксировать набор образцов, представляющий ваш типичный бизнес-процесс. Затем вам нужно будет просмотреть файлы журнала, чтобы определить наличие аномально больших пакетов ответов TCP.

Для получения дополнительной информации см.[DNS Logging and Diagnostics](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn800669%28v=ws.11%29)