---
title: "Resolva a vulnerabilidade do servidor DNS do Windows com KB4569509 - correção crítica de RCE"
date: 2020-07-25
---

[KB4569509: Guidance for DNS Server Vulnerability CVE-2020-1350](https://support.microsoft.com/en-us/help/4569509/windows-dns-server-remote-code-execution-vulnerability)

## Introdução

Em 14 de julho de 2020, a Microsoft lançou uma atualização de segurança para o problema descrito em CVE-2020-1350 | Vulnerabilidade de execução remota de código do servidor DNS do Windows. Este comunicado descreve uma vulnerabilidade Crítica de Execução Remota de Código (RCE) que afeta os servidores Windows configurados para executar a função de servidor DNS. Recomendamos enfaticamente que os administradores do servidor apliquem a atualização de segurança assim que possível.

Uma solução alternativa baseada no registro pode ser usada para ajudar a proteger um servidor Windows afetado e pode ser implementada sem exigir que um administrador reinicie o servidor. Devido à volatilidade dessa vulnerabilidade, os administradores podem ter que implementar a solução alternativa antes de aplicar a atualização de segurança para permitir que atualizem seus sistemas usando uma cadência de implantação padrão.


## Gambiarra

**Opcional:** faça o download do script de solução alternativa no[GitHub Repository](https://github.com/simeononsecurity/CVE-2020-1350-Fix)


Para contornar essa vulnerabilidade, faça a seguinte alteração no registro para restringir o tamanho do maior pacote de resposta DNS baseado em TCP de entrada permitido:

Subchave: HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DNS\Parameters

Valor: TcpReceivePacketSize

Tipo: DWORD

Dados do valor: 0xFF00

**Notas:**

    Os dados do valor padrão (também máximo) = 0xFFFF.

    Os dados do valor recomendado = 0xFF00 (255 bytes a menos que o máximo).

    Você deve reiniciar o serviço DNS para que a alteração do registro entre em vigor. Para fazer isso, execute o seguinte comando em um prompt de comando elevado:

```net stop dns && net start dns```


## Informações importantes sobre esta solução alternativa
Os pacotes de resposta DNS baseados em TCP que excedem o valor recomendado serão descartados sem erro. Portanto, é possível que algumas perguntas não sejam respondidas. Isso pode causar uma falha inesperada. Um servidor DNS será afetado negativamente por esta solução alternativa apenas se receber respostas TCP válidas maiores do que o permitido na mitigação anterior (mais de 65.280 bytes).

É improvável que o valor reduzido afete implantações padrão ou consultas recursivas. No entanto, um caso de uso não padrão pode existir em um determinado ambiente. Para determinar se a implementação do servidor será afetada negativamente por essa solução alternativa, você deve habilitar o log de diagnóstico e capturar um conjunto de amostra que seja representativo de seu fluxo de negócios típico. Em seguida, você terá que revisar os arquivos de log para identificar a presença de pacotes de resposta TCP anormalmente grandes

Para mais informações, veja[DNS Logging and Diagnostics](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn800669%28v=ws.11%29)