---
title: "使用 KB4569509 解决 Windows DNS 服务器漏洞 - 关键 RCE 修复"
date: 2020-07-25
---

[KB4569509: Guidance for DNS Server Vulnerability CVE-2020-1350](https://support.microsoft.com/en-us/help/4569509/windows-dns-server-remote-code-execution-vulnerability)

＃＃ 介绍

2020 年 7 月 14 日，Microsoft 针对 CVE-2020-1350 | 中描述的问题发布了安全更新。 Windows DNS 服务器远程代码执行漏洞。此通报描述了一个严重的远程执行代码 (RCE) 漏洞，该漏洞会影响配置为运行 DNS 服务器角色的 Windows 服务器。我们强烈建议服务器管理员尽早应用安全更新。

基于注册表的解决方法可用于帮助保护受影响的 Windows 服务器，并且无需管理员重新启动服务器即可实施。由于此漏洞的易变性，管理员可能必须在应用安全更新之前实施解决方法，以便他们能够使用标准部署节奏更新系统。


## 解决方法

**可选：** 从[GitHub Repository](https://github.com/simeononsecurity/CVE-2020-1350-Fix)


要解决此漏洞，请进行以下注册表更改以限制允许的基于 TCP 的最大入站 DNS 响应数据包的大小：

子键：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DNS\Parameters

值：TcpReceivePacketSize

类型：双字

数值数据：0xFF00

**笔记：**

    默认（也是最大）值数据 = 0xFFFF。

    建议的值数据 = 0xFF00（比最大值少 255 个字节）。

    您必须重新启动 DNS 服务以使注册表更改生效。为此，请在提升的命令提示符处运行以下命令：

```net stop dns && net start dns```


## 有关此解决方法的重要信息
超过推荐值的基于 TCP 的 DNS 响应数据包将被无错丢弃。因此，可能无法回答某些查询。这可能会导致意外故障。仅当 DNS 服务器接收到的有效 TCP 响应大于先前缓解措施所允许的（超过 65,280 字节）时，才会受到此变通办法的负面影响。

减少的值不太可能影响标准部署或递归查询。但是，给定环境中可能存在非标准用例。要确定服务器实施是否会受到此变通办法的不利影响，您应该启用诊断日志记录，并捕获代表典型业务流程的示例集。然后，您必须查看日志文件以确定是否存在异常大的 TCP 响应数据包

有关详细信息，请参阅[DNS Logging and Diagnostics](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn800669%28v=ws.11%29)