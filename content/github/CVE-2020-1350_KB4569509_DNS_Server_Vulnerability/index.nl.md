---
title: "Los Windows DNS-server kwetsbaarheid op met KB4569509 - Kritieke RCE Fix"
date: 2020-07-25
---

[KB4569509: Guidance for DNS Server Vulnerability CVE-2020-1350](https://support.microsoft.com/en-us/help/4569509/windows-dns-server-remote-code-execution-vulnerability)

## Introductie

Op 14 juli 2020 heeft Microsoft een beveiligingsupdate uitgebracht voor het probleem dat wordt beschreven in CVE-2020-1350 | Windows DNS Server Remote Code Execution Vulnerability. Deze advisory beschrijft een kritieke Remote Code Execution (RCE)-kwetsbaarheid die van invloed is op Windows-servers die zijn geconfigureerd om de DNS Server-rol uit te voeren. Wij raden serverbeheerders sterk aan de beveiligingsupdate zo snel mogelijk toe te passen.

Een workaround in het register kan worden gebruikt om een getroffen Windows-server te beschermen en kan worden geïmplementeerd zonder dat de beheerder de server opnieuw hoeft op te starten. Vanwege de veranderlijkheid van deze kwetsbaarheid is het mogelijk dat beheerders de workaround moeten implementeren voordat zij de beveiligingsupdate toepassen, zodat zij hun systemen kunnen bijwerken via een standaard implementatiecadans.


## Workaround

**Optioneel:** Download het workaround-script van de[GitHub Repository](https://github.com/simeononsecurity/CVE-2020-1350-Fix)


Om deze kwetsbaarheid te omzeilen, kunt u de volgende registerwijziging aanbrengen om de grootte van het grootste inkomende TCP-gebaseerde DNS-responspakket dat is toegestaan te beperken:

Subkey: HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DNSParameters

Waarde: TcpReceivePacketSize

Type: DWORD

Waarde gegevens: 0xFF00

**Noten:**

    De standaard (ook maximale) Waardegegevens = 0xFFFF.
	
    De aanbevolen Waardegegevens = 0xFF00 (255 bytes minder dan het maximum).
	
    U moet de DNS-service opnieuw starten om de wijziging in het register van kracht te laten worden. Voer daartoe de volgende opdracht uit op een verhoogde opdrachtprompt:

          ```net stop dns && net start dns```


## Belangrijke informatie over deze workaround
TCP gebaseerde DNS antwoordpakketten die de aanbevolen waarde overschrijden zullen zonder fout worden gedropt. Daarom is het mogelijk dat sommige queries niet beantwoord worden. Dit zou een onverwachte storing kunnen veroorzaken. Een DNS-server zal alleen negatieve gevolgen ondervinden van deze workaround als hij geldige TCP-antwoorden ontvangt die groter zijn dan toegestaan in de vorige beperking (meer dan 65.280 bytes).

Het is onwaarschijnlijk dat de verlaagde waarde invloed heeft op standaard implementaties of recursieve query's. Er kan echter een niet-standaard use-case bestaan in een bepaalde omgeving. Om te bepalen of de serverimplementatie nadelig wordt beïnvloed door deze workaround, moet u diagnostische logging inschakelen en een voorbeeldreeks vastleggen die representatief is voor uw typische bedrijfsstroom. Vervolgens moet u de logbestanden bekijken om de aanwezigheid van abnormaal grote TCP-responspakketten vast te stellen.

Voor meer informatie, zie[DNS Logging and Diagnostics](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn800669%28v=ws.11%29)