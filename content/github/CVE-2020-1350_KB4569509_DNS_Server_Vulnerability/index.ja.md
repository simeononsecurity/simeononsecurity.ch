---
title: "Windows DNS サーバーの脆弱性を KB4569509 で解決する - クリティカル RCE 修正"
date: 2020-07-25
---

[KB4569509: Guidance for DNS Server Vulnerability CVE-2020-1350](https://support.microsoft.com/en-us/help/4569509/windows-dns-server-remote-code-execution-vulnerability)

＃＃ 序章

2020 年 7 月 14 日、Microsoft は、「CVE-2020-1350 | CVE-2020-1350」で説明されている問題に対するセキュリティ更新プログラムをリリースしました。 Windows DNS サーバーのリモートでコードが実行される脆弱性。このアドバイザリでは、DNS サーバーの役割を実行するように構成されている Windows サーバーに影響を与える重大なリモート コード実行 (RCE) の脆弱性について説明します。サーバー管理者には、セキュリティ更新プログラムをできるだけ早く適用することを強くお勧めします。

レジストリ ベースの回避策は、影響を受ける Windows サーバーを保護するために使用でき、管理者がサーバーを再起動しなくても実装できます。この脆弱性は不安定であるため、管理者は、標準的な展開ペースを使用してシステムを更新できるように、セキュリティ更新プログラムを適用する前に回避策を実装する必要がある場合があります。


## 回避策

**オプション:** 次の場所から回避策スクリプトをダウンロードします。[GitHub Repository](https://github.com/simeononsecurity/CVE-2020-1350-Fix)


この脆弱性を回避するには、次のレジストリ変更を行って、許可される受信 TCP ベースの DNS 応答パケットの最大サイズを制限します。

サブキー: HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DNS\Parameters

値: TcpReceivePacketSize

タイプ: DWORD

値のデータ: 0xFF00

**ノート：**

    デフォルト (最大値でもある) 値のデータ = 0xFFFF。

    推奨される値のデータ = 0xFF00 (最大値より 255 バイト少ない)。

    レジストリの変更を有効にするには、DNS サービスを再起動する必要があります。これを行うには、管理者特権のコマンド プロンプトで次のコマンドを実行します。

```net stop dns && net start dns```


## この回避策に関する重要な情報
推奨値を超える TCP ベースの DNS 応答パケットは、エラーなしでドロップされます。そのため、一部のお問い合わせにはお答えできない場合がございます。予期せぬ障害が発生する可能性があります。 DNS サーバーがこの回避策によって悪影響を受けるのは、以前の緩和策で許可されているよりも大きい (65,280 バイトを超える) 有効な TCP 応答を受信した場合のみです。

減少した値が標準のデプロイメントや再帰クエリに影響を与える可能性はほとんどありません。ただし、特定の環境には非標準のユースケースが存在する可能性があります。この回避策によってサーバー実装が悪影響を受けるかどうかを判断するには、診断ログを有効にし、一般的なビジネス フローを表すサンプル セットをキャプチャする必要があります。次に、ログ ファイルを確認して、異常に大きい TCP 応答パケットの存在を特定する必要があります。

詳細については、を参照してください。[DNS Logging and Diagnostics](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn800669%28v=ws.11%29)