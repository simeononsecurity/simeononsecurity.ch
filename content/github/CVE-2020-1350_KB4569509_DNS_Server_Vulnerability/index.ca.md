---
title: "Resoldre la vulnerabilitat del servidor DNS de Windows amb KB4569509 - Correcció crítica de RCE"
date: 2020-07-25
---

[KB4569509: Guidance for DNS Server Vulnerability CVE-2020-1350](https://support.microsoft.com/en-us/help/4569509/windows-dns-server-remote-code-execution-vulnerability)

## Introducció

El 14 de juliol de 2020, Microsoft va publicar una actualització de seguretat per al problema que es descriu a CVE-2020-1350 | Vulnerabilitat d'execució de codi remota del servidor DNS de Windows. Aquest avís descriu una vulnerabilitat d'execució de codi remota crítica (RCE) que afecta els servidors de Windows que estan configurats per executar la funció de servidor DNS. Recomanem fermament que els administradors del servidor apliquen l'actualització de seguretat al més aviat possible.

Es pot utilitzar una solució alternativa basada en el registre per ajudar a protegir un servidor Windows afectat i es pot implementar sense requerir que un administrador reiniciï el servidor. A causa de la volatilitat d'aquesta vulnerabilitat, és possible que els administradors hagin d'implementar la solució alternativa abans d'aplicar l'actualització de seguretat per permetre'ls actualitzar els seus sistemes mitjançant una cadència de desplegament estàndard.


## Solució alternativa

**Opcional:** Baixeu l'script de solució alternativa des de[GitHub Repository](https://github.com/simeononsecurity/CVE-2020-1350-Fix)


Per evitar aquesta vulnerabilitat, feu el canvi de registre següent per restringir la mida del paquet de resposta DNS basat en TCP entrant més gran que es permet:

Subclau: HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DNS\Parameters

Valor: TcpReceivePacketSize

Tipus: DWORD

Dades del valor: 0xFF00

**Notes:**

    Les dades del valor per defecte (també màxim) = 0xFFFF.

    Les dades del valor recomanades = 0xFF00 (255 bytes menys que el màxim).

    Heu de reiniciar el servei DNS perquè el canvi de registre tingui efecte. Per fer-ho, executeu l'ordre següent en un indicador d'ordres elevat:

```net stop dns && net start dns```


## Informació important sobre aquesta solució alternativa
Els paquets de resposta DNS basats en TCP que superin el valor recomanat s'eliminaran sense error. Per tant, és possible que algunes consultes no es responguin. Això podria provocar un fracàs inesperat. Un servidor DNS es veurà afectat negativament per aquesta solució alternativa només si rep respostes TCP vàlides que són superiors a les permeses a la mitigació anterior (més de 65.280 bytes).

És poc probable que el valor reduït afecti els desplegaments estàndard o les consultes recursives. Tanmateix, pot existir un cas d'ús no estàndard en un entorn determinat. Per determinar si la implementació del servidor es veurà afectada negativament per aquesta solució alternativa, hauríeu d'habilitar el registre de diagnòstic i capturar un conjunt de mostres que sigui representatiu del vostre flux empresarial típic. Aleshores, haureu de revisar els fitxers de registre per identificar la presència de paquets de resposta TCP anormalment grans

Per a més informació, vegeu[DNS Logging and Diagnostics](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn800669%28v=ws.11%29)