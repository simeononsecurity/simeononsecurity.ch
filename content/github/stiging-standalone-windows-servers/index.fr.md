---
title: "Automating Windows Server STIG Compliance with STIG Scripts"
date: 2020-09-09-T11:59:03-05:00
toc: true
draft: false
description: "Learn how to automate STIGing Windows Server 2012, 2016, and 2019 with the Windows STIG Script, ensuring compliance with various organizations' recommendations and requirements."
tags: ["Automation", "Windows STIG", "Windows Server 2012", "Windows Server 2012 R2", "Windows Server 2016", "Windows Server 2019", "Powershell", "Script", "STIGing", "Compliance", "Enterprise Environments", "Hardware Requirements", "Telemetry Blocking", "Macros", "Bloatware", "Physical Attacks", "Standalone Systems", "System Documentation", "Bitlocker", "Rebooting"]
---
```powershell
iex ((New-Object System.Net.WebClient).DownloadString('https://simeononsecurity.ch/scripts/standalonewindows.ps1'))
```
```powershell
.\secure-standalone.ps1
```
```powershell
.\secure-standalone.ps1 -firefox $false
```
```powershell
.\secure-standalone.ps1 -firefox $false -chrome $false
```

 **Téléchargez tous les fichiers requis depuis le [GitHub Repository](https://github.com/simeononsecurity/Standalone-Windows-STIG-Script)**  **Remarque :** Ce script devrait fonctionner sans problème pour la plupart des systèmes, sinon tous. Bien que [@SimeonOnSecurity](https://github.com/simeononsecurity) crée, examine et teste chaque référentiel de manière intensive, nous ne pouvons pas tester toutes les configurations possibles, pas plus que [@SimeonOnSecurity](https:// github.com/simeononsecurity) prendre toute responsabilité pour casser votre système. En cas de problème, soyez prêt à soumettre un [problème](../../issues). N'exécutez pas ce script si vous ne comprenez pas ce qu'il fait. Il est de votre responsabilité d'examiner et de tester le script avant l'exécution.  ## Ansible : Nous offrirons désormais une collection de playbooks pour ce script. Veuillez consulter les éléments suivants : - [Github Repo](https://github.com/simeononsecurity/Windows_STIG_Ansible) - [Ansible Galaxy](https://galaxy.ansible.com/simeononsecurity/windows_stigs)  ## Introduction:  Windows 10 est un système d'exploitation non sécurisé prêt à l'emploi et nécessite de nombreuses modifications pour assurer la conformité [FISMA](https://www.cisa.gov/federal-information-security-modernization-act). Des organisations comme [Microsoft](https://microsoft.com), [Cyber.mil](https://public.cyber.mil), le [Department of Defense](https://dod.gov) et le [National Security Agency](https://www.nsa.gov/) a recommandé et exigé des changements de configuration pour verrouiller, renforcé et sécurisé le système d'exploitation et garanti la conformité du gouvernement. Ces modifications entraînent un large éventail de mesures d'atténuation, notamment le blocage de la télémétrie, des macros, la suppression des bloatwares et la prévention de nombreuses attaques physiques sur un système.  Les systèmes autonomes sont parmi les systèmes les plus difficiles et les plus ennuyeux à sécurisés. Lorsqu'ils ne sont pas automatisés, ils apportent des modifications manuelles de chaque STIG/SRG. Totalisant plus de 1000 changements de configuration sur un déploiement typique et une moyenne de 5 minutes par changement équivalant à 3,5 jours de travail. Ce script vise à accélérer ce processus de manière significative.  ##Remarques :  - Ce script est conçu pour fonctionner dans des environnements **Enterprise** et suppose que vous pourriez supporter un matériel pour toutes les exigences.   - Pour les systèmes personnels, veuillez consulter ce [GitHub Repository](https://github.com/simeononsecurity/Windows-Optimize-Harden-Debloat) - Ce script n'est pas conçu pour amener un système à 100 % de conformité, il doit plutôt être utilisé comme un tremplin pour effectuer la plupart, sinon la totalité, des modifications de configuration pouvant être scriptées.   - Moins la documentation du système, cette collecte devrait vous apporter jusqu'à environ 95 % de conformité sur tous les appliqués STIGS/SRG.  ##Exigence : - [X] Windows 10 Enterprise est requis par STIG. - [X] [Normes](https://docs.microsoft.com/en-us/windows-hardware/design/device-experiences/oem-highly-secure) pour un appareil Windows 10 hautement sécurisé - [X] Le système est [entièrement à jour](https://support.microsoft.com/en-gb/help/4027667/windows-10-update)   - Exécutez [l'assistant de mise à niveau de Windows 10](https://support.microsoft.com/en-us/help/3159635/windows-10-update-assistant) pour mettre à jour et vérifier la dernière version majeur. - [X] Bitlocker doit être suspendu ou désactivé avant d'implémenter ce script, il peut être réactivé après le redémarrage.   - Les exécutions de suivi de ce script peuvent être exécutées sans désactiver le bitlocker. - [X] Configuration matérielle requise   - [Configuration matérielle requise pour l'intégrité de la mémoire] (https://docs.microsoft.com/en-us/windows/security/threat-protection/device-guard/requirements-and-deployment-planning-guidelines- for-virtualization-based -protection-of-code-integrity#baseline-protections)   - [Configuration matérielle requise pour la sécurité basée sur la virtualisation](https://docs.microsoft.com/en-us/windows-hardware/design/device-experiences/oem-vbs)   - [Configuration matérielle requise pour Windows Defender Application Guard](https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-guard/reqs-wd-app-guard)   - [Configuration matérielle requise pour Windows Defender Credential Guard](https://docs.microsoft.com/en-us/windows/security/identity-protection/credential-guard/credential-guard-requirements)    ## Conférences recommandées :   - [Lancement sécurisé de System Guard] (https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-system-guard/system-guard-secure-launch-and-smm - protection#exigences-satisfaites-par-les-machines-compatibles-avec-system-guard)   - [System Guard Root of Trust](https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-system-guard/system-guard-how-hardware-based-root -de-confiance-aide-à-protéger-windows)   - [Isolation basée sur le matériel](https://docs.microsoft.com/en-us/windows/security/threat-protection/microsoft-defender-atp/overview-hardware-based-isolation)   - [Intégrité de la mémoire] (https://docs.microsoft.com/en-us/windows/security/threat-protection/device-guard/memory-integrity)   - [Windows Defender Application Guard] (https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-guard/wd-app-guard-overview)   - [Windows Defender Credential Guard](https://docs.microsoft.com/en-us/windows/security/identity-protection/credential-guard/credential-guard-how-it-works)  ## Une liste de scripts et d'outils utilisés par cette collection : - [Cyber.mil - Objets de stratégie de groupe](https://public.cyber.mil/stigs/gpo/) - [Microsoft Security Compliance Toolkit 1.0](https://www.microsoft.com/en-us/download/details.aspx?id=55319)  ## Des configurations supplémentaires ont été prises en charge à partir de : - [Microsoft - Règles de blocage recommandées](https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-control/microsoft-recommended-block-rules) - [Microsoft - Règles de blocage des pilotes recommandés](https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-control/microsoft-recommended-driver-block- règles) - [Microsoft - Contrôle des applications Windows Defender](https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-control/windows-defender-application-control-design - guide) - [NSACyber - Liste blanche d'applications à l'aide de Microsoft AppLocker](https://apps.nsa.gov/iad/library/ia-guidance/tech-briefs/application-whitelisting-using-microsoft-applocker. pcm) - [NSACyber - Hardware-and-Firmware-Security-Guidance](https://github.com/nsacyber/Hardware-and-Firmware-Security-Guidance) - [NSACyber - Base de référence de l'hôte sécurisé Windows](https://github.com/nsacyber/Windows-Secure-Host-Baseline)  ## Appliqués STIGS/SRG : - [Suite Adobe Acrobat Pro DC V2R1](https://public.cyber.mil/stigs/downloads/) - [Adobe Acrobat Reader DC V2R1 continuer](https://public.cyber.mil/stigs/downloads/) - [Firefox V5R2](https://public.cyber.mil/stigs/downloads/) - [Google Chrome V2R4](https://public.cyber.mil/stigs/downloads/) - [Internet Explorer 11 V1R19](https://public.cyber.mil/stigs/downloads/) -[Microsoft Edge V1R2](https://public.cyber.mil/stigs/downloads/) - [Microsoft.Net Framework 4 V1R9](https://public.cyber.mil/stigs/downloads/) - [Microsoft Office 2013 V2R1](https://public.cyber.mil/stigs/downloads/) - [Microsoft Office 2016 V2R1](https://public.cyber.mil/stigs/downloads/) - [Microsoft Office 2019/Office 365 Pro Plus V2R3](https://public.cyber.mil/stigs/downloads/) - [Microsoft OneDrive STIG V2R1](https://public.cyber.mil/stigs/downloads/) - [Oracle JRE 8 V1R5](https://public.cyber.mil/stigs/downloads/) - [Windows 10 V2R2](https://public.cyber.mil/stigs/downloads/) - [Pare-feu Windows V1R7](https://public.cyber.mil/stigs/downloads/)  ## Modification des stratégies dans la stratégie de groupe locale après coup : - Importez les définitions de stratégie ADMX à partir de ce [repo](https://github.com/simeononsecurity/STIG-Compliant-Domain-Prep/tree/master/Files/PolicyDefinitions) dans *C:\windows\PolicyDefinitions* sur le système vous essayez de modifier. - Ouvrez ```gpedit.msc``` sur le système que vous essayez de modifier.   ## Commentez le script : ### Installation automatisée : Le script peut être lancé à partir du téléchargement GitHub extrait comme ceci :  ### Installation manuelle : S'il est téléchargé manuellement, le script doit être lancé à partir du répertoire contenant tous les autres fichiers du [GitHub Repository](https://github.com/simeononsecurity/Standalone-Windows-STIG-Script)  Tous les paramètres du script "secure-standalone.ps1" sont facultatifs, avec une valeur par défaut de $true. Cela signifie que si aucune valeur n'est désignée pour un paramètre lors de l'exécution du script, il sera traité comme s'il était défini sur $true.  Le script prend les paramètres suivants, qui sont tous facultatifs et par défaut à $true s'ils ne sont pas spécifiés :  - **cleargpos** : (booléen) effacer les objets de stratégie de groupe non utilisés - **installupdates** : (Booléen) Installer les mises à jour et remettre en place si nécessaire - **adobe** : (booléen) STIG Adobe Reader - **firefox** : (booléen) STIG Firefox - **chrome** : (Booléen) STIG Chrome - **IE11** : (booléen) STIG Internet Explorer 11 - **edge** : (booléen) STIG Edge - **dotnet** : (booléen) STIG .NET Framework - **bureau** : (Booléen) Bureau STIG - **onedrive** : (booléen) STIG OneDrive - **java** : (booléen) STIG Java - **windows** : (booléen) STIG Windows - **defender** : (booléen) STIG Windows Defender - **pare-feu** : (booléen) Pare-feu Windows STIG - **atténuations** : (booléen) Atténuations STIG - **nessusPID** : (booléen) résout les chaînes sans guillemets dans le chemin - **horizon** : (booléen) STIG VMware Horizon - **sosoptional** : (booléen) Éléments optionnels STIG/Durcissement  Voici un exemple d'exécution du script avec tous les paramètres par défaut :  Si vous préférez une valeur différente pour un ou plusieurs des paramètres, vous pouvez les inclure dans la commande avec leur valeur requise. Par exemple, si vous vouliez effectuer le script et définir le paramètre $firefox sur $false, la commande serait :   Vous pouvez également spécifier plusieurs paramètres dans la commande comme ceci :   Notez que dans cet exemple, les paramètres Firefox et Chrome sont définis sur $false.   