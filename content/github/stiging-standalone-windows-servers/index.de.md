---
title: "Automating Windows Server STIG Compliance with STIG Scripts"
date: 2020-09-09-T11:59:03-05:00
toc: true
draft: false
description: "Learn how to automate STIGing Windows Server 2012, 2016, and 2019 with the Windows STIG Script, ensuring compliance with various organizations' recommendations and requirements."
tags: ["Automation", "Windows STIG", "Windows Server 2012", "Windows Server 2012 R2", "Windows Server 2016", "Windows Server 2019", "Powershell", "Script", "STIGing", "Compliance", "Enterprise Environments", "Hardware Requirements", "Telemetry Blocking", "Macros", "Bloatware", "Physical Attacks", "Standalone Systems", "System Documentation", "Bitlocker", "Rebooting"]
---
```powershell
iex ((New-Object System.Net.WebClient).DownloadString('https://simeononsecurity.ch/scripts/standalonewindows.ps1'))
```
```powershell
.\secure-standalone.ps1
```
```powershell
.\secure-standalone.ps1 -firefox $false
```
```powershell
.\secure-standalone.ps1 -firefox $false -chrome $false
```

 **Laden Sie alle erforderlichen Dateien aus dem [GitHub-Repository] herunter (https://github.com/simeononsecurity/Standalone-Windows-STIG-Script)**  **Hinweis:** Dieses Skript sollte für die meisten sterben, wenn nicht alle Systeme ohne Probleme funktionieren. Während [@SimeonOnSecurity](https://github.com/simeononsecurity) jedes Repo intensiv erstellt, überprüft und getestet, können wir nicht jede mögliche Konfiguration testen, und [@SimeonOnSecurity](https://github.com/simeononsecurity) tut stirbt auch nicht. übernehmen Sie keine Verantwortung für das Brechen Ihres Systems. If etwas schief geht, seien Sie bereit, ein [Problem] (../../issues) einzureichen. Führen Sie dieses Skript nicht aus, wenn Sie nicht verstehen, was es tut. Es liegt in Ihrer Verantwortung, das Skript zu überprüfen und zu testen, bevor Sie es ausführen.  ##Ansible: Wir bieten jetzt eine Playbook-Sammlung für dieses Skript an. Bitte beachten Sie Folgendes: - [Github-Repository] (https://github.com/simeononsecurity/Windows_STIG_Ansible) - [Ansible Galaxy] (https://galaxy.ansible.com/simeononsecurity/windows_stigs)  ## Einführung:  Windows 10 ist ein unsicheres Betriebssystem und erfordert viele Änderungen, um die Einhaltung von [FISMA](https://www.cisa.gov/federal-information-security-modernization-act) zu gewährleisten. Organisationen wie [Microsoft](https://microsoft.com), [Cyber.mil](https://public.cyber.mil), das [Department of Defense](https://dod.gov) und die [ National Security Agency](https://www.nsa.gov/) hat Konfigurationsänderungen empfohlen und gefordert, um das Betriebssystem zu sperren, zu härten und zu sichern und die Einhaltung der Vorschriften durch die Regierung sicherzustellen. Diese Änderungen decken ein breites Spektrum an Schadensbegrenzungen ab, darunter das Blockieren von Telemetrie und Makros, das Entfernen von Bloatware und das Verhindern körperlicher Angriffe auf ein System.  Eigenständige Systeme gehören zu den am schwierigsten und lästigsten zu sichernden Systemen. Wenn sie nicht automatisiert sind, verlangen sie manuelle Änderungen jedes STIG/SRG. Insgesamt über 1000 Änderungen bei einer Konfigurationsbereitstellung und durchschnittlich 5 Minuten pro Änderung, was einem Arbeitsaufwand von 3,5 entspricht. Dieses Skript richtet sich darauf ab, diesen Prozess erheblich zu beschleunigen.  ## Anmerkungen:  - Dieses Skript ist für den Betrieb in **Enterprise**-Umgebungen konzipiert und setzt voraus, dass Sie über Hardwareunterstützung für alle Anforderungen verfügen.   - Für persönliche Systeme siehe dieses [GitHub-Repository] (https://github.com/simeononsecurity/Windows-Optimize-Harden-Debloat) - Dieses Skript ist nicht darauf ausgelegt, ein System zu 100 % konform zu machen, sondern sollte als Sprungbrett verwendet Werden, um die meisten, wenn nicht alle Konfigurationsänderungen, die per Skript möglich sind, abzuschließen.   - Abzüglich der Systemdokumentation sollte diese Sammlung Ihnen eine Compliance von etwa 95 % aller angewandten STIGS/SRGs bringen.  ## Anforderungen: - [X] Windows 10 Enterprise ist pro STIG erforderlich. - [X] [Standards](https://docs.microsoft.com/en-us/windows-hardware/design/device-experiences/oem-highly-secure) für ein hochsicheres Windows 10-Gerät - [X] System ist [vollständig auf dem neuesten Stand] (https://support.microsoft.com/en-gb/help/4027667/windows-10-update)   - Führen Sie den [Windows 10-Upgrade-Assistenten] (https://support.microsoft.com/en-us/help/3159635/windows-10-update-assistant) aus, um die neueste Hauptversion zu aktualisieren und zu überprüfen . - [X] Bitlocker muss vor der Implementierung dieses Skripts angehalten oder ausgeschaltet werden, es kann nach dem Neustart wieder aktiviert werden.   - Folgeausführungen dieses Skripts können ohne Deaktivierung von Bitlocker ausgeführt werden. - [X] Hardwareanforderungen   - [Hardwareanforderungen für Speicherintegrität] (https://docs.microsoft.com/en-us/windows/security/threat-protection/device-guard/requirements-and-deployment-planning-guidelines-for-virtualization-based -Schutz -der-Code-Integrität#Baseline-Protections)   - [Hardwareanforderungen für virtualisierungsbasierte Sicherheit](https://docs.microsoft.com/en-us/windows-hardware/design/device-experiences/oem-vbs)   – [Hardwareanforderungen für Windows Defender Application Guard](https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-guard/reqs-wd-app-guard)   – [Hardwareanforderungen für Windows Defender Credential Guard] (https://docs.microsoft.com/en-us/windows/security/identity-protection/credential-guard/credential-guard-requirements)    ##Empfohlener Lesestoff:   - [Sicherer Start von System Guard] (https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-system-guard/system-guard-secure-launch-and-smm - Schutz#Anforderungen-erfüllt-von-System-Guard-fähigen-Maschinen)   - [System Guard Root of Trust] (https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-system-guard/system-guard-how-hardware-based-root -des-Vertrauens-hilft-Fenster-zu-schützen)   - [Hardwarebasierte Isolierung](https://docs.microsoft.com/en-us/windows/security/threat-protection/microsoft-defender-atp/overview-hardware-based-isolation)   - [Speicherintegrität](https://docs.microsoft.com/en-us/windows/security/threat-protection/device-guard/memory-integrity)   - [Windows Defender Application Guard] (https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-guard/wd-app-guard-overview)   - [Windows Defender Credential Guard] (https://docs.microsoft.com/en-us/windows/security/identity-protection/credential-guard/credential-guard-how-it-works)  ## Eine Liste von Skripten und Tools, die diese Sammlung verwendet: - [Cyber.mil – Gruppenrichtlinienobjekte](https://public.cyber.mil/stigs/gpo/) - [Microsoft Security Compliance Toolkit 1.0](https://www.microsoft.com/en-us/download/details.aspx?id=55319)  ## Zusätzliche Konfigurationen wurden berücksichtigt von: - [Microsoft – Empfohlene Sperrregeln](https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-control/microsoft-recommended-block-rules) – [Microsoft – Empfohlene Treiberblockierungsregeln](https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-control/microsoft-recommended-driver-block-rules) – [Microsoft – Windows Defender Application Control](https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-control/windows-defender-application-control-design- Führung) - [NSACyber – Whitelisting von Anwendungen mit Microsoft AppLocker](https://apps.nsa.gov/iad/library/ia-guidance/tech-briefs/application-whitelisting-using-microsoft-applocker.cfm) - [NSACyber - Hardware-and-Firmware-Security-Guidance](https://github.com/nsacyber/Hardware-and-Firmware-Security-Guidance) – [NSACyber – Windows Secure Host Baseline] (https://github.com/nsacyber/Windows-Secure-Host-Baseline)  ## Angewendete STIGS/SRGs: - [Adobe Acrobat Pro DC Continuous V2R1](https://public.cyber.mil/stigs/downloads/) - [Adobe Acrobat Reader DC Continuous V2R1](https://public.cyber.mil/stigs/downloads/) - [Firefox V5R2](https://public.cyber.mil/stigs/downloads/) - [Google Chrome V2R4](https://public.cyber.mil/stigs/downloads/) - [Internet Explorer 11 V1R19](https://public.cyber.mil/stigs/downloads/) - [Microsoft Edge V1R2](https://public.cyber.mil/stigs/downloads/) - [Microsoft .Net Framework 4 V1R9](https://public.cyber.mil/stigs/downloads/) - [Microsoft Office 2013 V2R1](https://public.cyber.mil/stigs/downloads/) - [Microsoft Office 2016 V2R1](https://public.cyber.mil/stigs/downloads/) - [Microsoft Office 2019/Office 365 Pro Plus V2R3](https://public.cyber.mil/stigs/downloads/) - [Microsoft OneDrive STIG V2R1](https://public.cyber.mil/stigs/downloads/) - [Oracle JRE 8 V1R5](https://public.cyber.mil/stigs/downloads/) - [Windows 10 V2R2](https://public.cyber.mil/stigs/downloads/) - [Windows-Firewall V1R7](https://public.cyber.mil/stigs/downloads/)  ## Nachträgliches Bearbeiten von Richtlinien in der lokalen Gruppenrichtlinie: – Importieren Sie die ADMX-Richtliniendefinitionen aus diesem [Repository] (https://github.com/simeononsecurity/STIG-Compliant-Domain-Prep/tree/master/Files/PolicyDefinitions) in *C:\windows\PolicyDefinitions* auf dem System Sie versuchen zu ändern. - Öffnen Sie ```gpedit.msc``` auf dem System, das Sie ändern möchten.   ## So führen Sie das Skript aus: ### Automatische Installation: Das Skript kann wie folgt aus dem gesicherten GitHub-Download gestartet werden:  ### Manuelle Installation: Wenn es manuell heruntergeladen wird, muss das Skript aus dem Verzeichnis gestartet werden, das alle anderen Dateien aus dem [GitHub-Repository] (https://github.com/simeononsecurity/Standalone-Windows-STIG-Script) enthält.  Alle Parameter im Skript „secure-standalone.ps1“ sind optional, mit einem Standardwert von $true. Das heißt, wenn für einen Parameter beim Ausführen des Skripts kein Wert angegeben IST, WIRD er so behandelt, als ob er auf $true gesetzt wäre.  Das Skript akzeptiert die folgenden Parameter, die alle optional sind und standardmäßig auf $true gesetzt werden, wenn sie nicht angegeben werden:  - **cleargpos**: (Boolean) Nicht verwendete GPOs löschen - **installupdates**: (Boolean) Updates und ggf. installieren. neu starten - **adobe**: (Boolesch) STIG Adobe Reader - **firefox**: (Boolesch) STIG Firefox - **Chrom**: (Boolesch) STIG Chrom - **IE11**: (Boolesch) STIG Internet Explorer 11 - **Kante**: (Boolesch) STIG-Kante - **dotnet**: (Boolesch) STIG .NET Framework - **Büro**: (Boolesch) STIG-Büro - **onedrive**: (Boolesch) STIG OneDrive - **java**: (Boolesch) STIG Java - **Fenster**: (Boolean) STIG-Fenster - **Verteidiger**: (Boolean) STIG Windows Defender - **Firewall**: (Boolesch) STIG-Windows-Firewall - **Minderungen**: (Boolean) STIG-Minderungen - **nessusPID**: (Boolean) Löst Zeichenfolgen ohne Anführungszeichen im Pfad auf - **Horizont**: (Boolesch) STIG VMware Horizon - **sosoptional**: (Boolean) Optionale STIG/Hardening-Elemente  Ein Beispiel für die Ausführung des Skripts mit allen Standardparametern wäre:  Wenn Sie für einen oder mehrere Parameter einen anderen Wert angeben möchten, können Sie diese zusammen mit dem gewünschten Wert in den Befehl aufnehmen. Wenn Sie beispielsweise das Skript ausführen und den Parameter $firefox auf $false setzen möchten, lautet der Befehl:   Sie können auch mehrere Parameter im Befehl wie folgt angeben:   Beachten Sie, dass in diesem Beispiel sowohl die Firefox- als auch die Chrome-Parameter auf $false gesetzt sind.   