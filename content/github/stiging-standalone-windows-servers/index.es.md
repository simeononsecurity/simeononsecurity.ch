---
title: "Automating Windows Server STIG Compliance with STIG Scripts"
date: 2020-09-09-T11:59:03-05:00
toc: true
draft: false
description: "Learn how to automate STIGing Windows Server 2012, 2016, and 2019 with the Windows STIG Script, ensuring compliance with various organizations' recommendations and requirements."
tags: ["Automation", "Windows STIG", "Windows Server 2012", "Windows Server 2012 R2", "Windows Server 2016", "Windows Server 2019", "Powershell", "Script", "STIGing", "Compliance", "Enterprise Environments", "Hardware Requirements", "Telemetry Blocking", "Macros", "Bloatware", "Physical Attacks", "Standalone Systems", "System Documentation", "Bitlocker", "Rebooting"]
---
```powershell
iex ((New-Object System.Net.WebClient).DownloadString('https://simeononsecurity.ch/scripts/standalonewindows.ps1'))
```
```powershell
.\secure-standalone.ps1
```
```powershell
.\secure-standalone.ps1 -firefox $false
```
```powershell
.\secure-standalone.ps1 -firefox $false -chrome $false
```

 **Descargue todos los archivos necesarios del [Repositorio de GitHub](https://github.com/simeononsecurity/Standalone-Windows-STIG-Script)**  **Nota:** Este script debería funcionar para la mayoría de los sistemas, si no todos, sin problemas. Si bien [@SimeonOnSecurity](https://github.com/simeononsecurity) crea, revisa y prueba cada repositorio de forma intensiva, no podemos probar todas las configuraciones posibles ni [@SimeonOnSecurity](https://github.com/simeononsecurity ) no asume ninguna responsabilidad por romper su sistema. Si algo sale mal, prepárate para enviar un [problema](../../problemas). No ejecute este script si no comprende lo que hace. Es su responsabilidad revisar y probar el guión antes de ejecutarlo.  ##Ansible: Ahora ofrecemos una colección de libros de jugadas para este guión. Por favor vea lo siguiente: - [Github Repo](https://github.com/simeononsecurity/Windows_STIG_Ansible) - [Ansible Galaxy](https://galaxy.ansible.com/simeononsecurity/windows_stigs)  ## Introducción:  Windows 10 es un sistema operativo seguro listo para usar y requiere muchos cambios para asegurar el cumplimiento de [FISMA](https://www.cisa.gov/federal-information-security-modernization-act). Organizaciones como [Microsoft](https://microsoft.com), [Cyber.mil](https://public.cyber.mil), el [Departamento de Defensa](https://dod.gov) y el [ Agencia de Seguridad Nacional](https://www.nsa.gov/) ha recomendado y requerido cambios de configuración para bloquear, fortalecer y proteger el sistema operativo y garantizar el cumplimiento del gobierno. Estos cambios cubren una amplia gama de mitigaciones, incluido el bloqueo de telemetría, macros, la eliminación de bloatware y la prevención de muchos ataques físicos en un sistema.  Los sistemas independientes son algunos de los sistemas más difíciles y molestos de proteger. Cuando no están automatizados, requieren cambios manuales de cada STIG/SRG. Con un total de más de 1000 cambios de configuración en una implementación típica y un promedio de 5 minutos por cambio, lo que equivale a 3,5 días de trabajo. Este script tiene como objetivo acelerar ese proceso de manera significativa.  ## Notas:  - Este script está diseñado para operar en entornos **Enterprise** y asume que tiene soporte de hardware para todos los requisitos.   - Para sistemas personales, consulte este [repositorio de GitHub] (https://github.com/simeononsecurity/Windows-Optimize-Harden-Debloat) - Este script no está diseñado para que un sistema cumpla al 100 %, sino que debe usarse como un trampolín para completar la mayoría, si no todos, los cambios de configuración que se pueden programar.   - Menos la documentación del sistema, esta recopilación debería brindarle hasta un 95 % de cumplimiento en todos los STIGS/SRG aplicados.  ##Requisitos: - Se requiere [X] Windows 10 Enterprise por STIG. - [X] [Estándares](https://docs.microsoft.com/en-us/windows-hardware/design/device-experiences/oem-highly-secure) para un dispositivo Windows 10 altamente seguro - [X] El sistema está [totalmente actualizado] (https://support.microsoft.com/en-gb/help/4027667/windows-10-update)   - Ejecute el [Asistente de actualización de Windows 10](https://support.microsoft.com/en-us/help/3159635/windows-10-update-assistant) para actualizar y verificar la versión principal más reciente. - [X] Bitlocker debe suspenderse o apagarse antes de implementar este script, se puede volver a habilitar después de reiniciar.   - Las ejecuciones de seguimiento de este script se pueden ejecutar sin deshabilitar BitLocker. - [X] Requisitos de hardware   - [Requisitos de hardware para la integridad de la memoria](https://docs.microsoft.com/en-us/windows/security/threat-protection/device-guard/requirements-and-deployment-planning-guidelines-for -virtualization-based -protección-de-integridad-de-código#baseline-protections)   - [Requisitos de hardware para seguridad basada en virtualización](https://docs.microsoft.com/en-us/windows-hardware/design/device-experiences/oem-vbs)   - [Requisitos de hardware para la protección de aplicaciones de Windows Defender] (https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-guard/reqs-wd-app -guardia)   - [Requisitos de hardware para Credential Guard de Windows Defender](https://docs.microsoft.com/en-us/windows/security/identity-protection/credential-guard/credential-guard-requirements)    ## Material de lectura recomendado:   - [Lanzamiento seguro de System Guard](https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-system-guard/system-guard-secure-launch-and-smm - protección#requisitos-cumplidos-por-sistema-guardia-habilitado-máquinas)   - [Raíz de confianza de System Guard](https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-system-guard/system-guard-how-hardware-based- root -de-confianza-ayuda-a-proteger-ventanas)   - [Aislamiento basado en hardware](https://docs.microsoft.com/en-us/windows/security/threat-protection/microsoft-defender-atp/overview-hardware-based-isolation)   - [Integridad de la memoria](https://docs.microsoft.com/en-us/windows/security/threat-protection/device-guard/memory-integrity)   - [Protección de aplicaciones de Windows Defender](https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-guard/wd-app-guard-overview)   - [Protección de credenciales de Windows Defender](https://docs.microsoft.com/en-us/windows/security/identity-protection/credential-guard/credential-guard-how-it-works)  ## Una lista de scripts y herramientas que utiliza esta colección: - [Cyber.mil - Objetos de directiva de grupo](https://public.cyber.mil/stigs/gpo/) - [Kit de herramientas de cumplimiento de seguridad de Microsoft 1.0](https://www.microsoft.com/en-us/download/details.aspx?id=55319)  ## Se consideraron configuraciones adicionales de: - [Microsoft - Reglas de bloqueo recomendadas](https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-control/microsoft-recommended-block-rules) - [Microsoft: reglas de bloqueo de controladores recomendados] (https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-control/microsoft-recommended-driver-block- normas) - [Microsoft - Control de aplicaciones de Windows Defender](https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-control/windows-defender-application-control- diseño-guía) - [NSACyber - Lista blanca de aplicaciones usando Microsoft AppLocker](https://apps.nsa.gov/iad/library/ia-guidance/tech-briefs/application-whitelisting-using-microsoft-applocker.cfm) - [NSACyber - Guía de seguridad de hardware y firmware] (https://github.com/nsacyber/Hardware-and-Firmware-Security-Guidance) - [NSACyber - Línea base de host seguro de Windows](https://github.com/nsacyber/Windows-Secure-Host-Baseline)  ## STIGS/SRG aplicados: - [Adobe Acrobat Pro DC continuo V2R1](https://public.cyber.mil/stigs/downloads/) - [Adobe Acrobat Reader DC continuo V2R1](https://public.cyber.mil/stigs/downloads/) - [Firefox V5R2](https://public.cyber.mil/stigs/downloads/) - [Google Chrome V2R4](https://public.cyber.mil/stigs/downloads/) - [Internet Explorer 11 V1R19](https://public.cyber.mil/stigs/downloads/) - [Microsoft Edge V1R2](https://public.cyber.mil/stigs/downloads/) - [Microsoft .Net Framework 4 V1R9](https://public.cyber.mil/stigs/downloads/) - [Microsoft Office 2013 V2R1](https://public.cyber.mil/stigs/downloads/) - [Microsoft Office 2016 V2R1](https://public.cyber.mil/stigs/downloads/) - [Microsoft Office 2019/Office 365 Pro Plus V2R3](https://public.cyber.mil/stigs/downloads/) - [Microsoft OneDrive STIG V2R1](https://public.cyber.mil/stigs/downloads/) - [Oracle JRE 8 V1R5](https://public.cyber.mil/stigs/downloads/) - [Windows 10 V2R2](https://public.cyber.mil/stigs/downloads/) - [Cortafuegos de Windows V1R7](https://public.cyber.mil/stigs/downloads/)  ## Editar políticas en la Política de grupo local después del hecho: - Importe las definiciones de la política ADMX de este [repo](https://github.com/simeononsecurity/STIG-Compliant-Domain-Prep/tree/master/Files/PolicyDefinitions) a *C:\windows\PolicyDefinitions* en el sistema usted esta tratando de modificar. - Abra ```gpedit.msc``` en el sistema que está tratando de modificar.   ##ejecutar cómo el script: ### Instalación automática: El script se puede iniciar desde la descarga de GitHub extraída de esta manera:  ### Manual de instalación: Si se descarga manualmente, el script debe iniciarse desde el directorio que contiene todos los demás archivos del [repositorio de GitHub] (https://github.com/simeononsecurity/Standalone-Windows-STIG-Script)  Todos los parámetros en el script "secure-standalone.ps1" son opcionales, con un valor predeterminado de $true. Esto significa que si no se especifica ningún valor para un parámetro cuando se ejecuta el script, se tratará como si estuviera establecido en $true.  El script toma los siguientes parámetros, todos opcionales y predeterminados en $true si no se especifica:  - **cleargpos**: (booleano) Borrar GPO que no se utilice - **instalar actualizaciones**: (booleano) instalar actualizaciones y reiniciar si es necesario - **adobe**: (booleano) STIG Adobe Reader - **firefox**: (booleano) STIG Firefox - **cromo**: (booleano) STIG cromo - **IE11**: (booleano) STIG Internet Explorer 11 - **borde**: (booleano) borde STIG - **dotnet**: (booleano) STIG .NET Framework - **oficina**: (Booleano) Oficina STIG - **onedrive**: (booleano) STIG OneDrive - **java**: (booleano) STIG Java - **ventanas**: (Booleano) STIG Ventanas - **defensor**: (booleano) STIG Windows Defender - **cortafuegos**: (Booleano) STIG Cortafuegos de Windows - **mitigaciones**: (booleano) Mitigaciones STIG - **nessusPID**: (Booleano) Resolver cadenas sin comillas en la ruta - **horizonte**: (booleano) STIG VMware Horizon - **sosopcional**: (booleano) STIG/elementos de endurecimiento opcionales  Un ejemplo de cómo ejecutar el script con todos los parámetros predeterminados sería:  Si desea especificar un valor diferente para uno o más de los parámetros, puede incluirlos en el comando junto con su valor deseado. Por ejemplo, si quisiera ejecutar el script y establecer el parámetro $firefox en $false, el comando sería:   También puede especificar varios parámetros en el comando como este:   Tenga en cuenta que en este ejemplo, los parámetros de Firefox y Chrome están configurados en $false.   