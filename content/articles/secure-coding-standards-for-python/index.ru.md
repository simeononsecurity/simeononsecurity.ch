---
title: "Стандарты безопасного кодирования на Python: Лучшие практики"
date: 2023-02-26
toc: true
draft: false
description: "Ознакомьтесь с лучшими практиками безопасного кодирования на языке Python, чтобы минимизировать риск нарушения безопасности и защитить конфиденциальные данные."
tags: ["Python", "Безопасное кодирование", "Риски безопасности", "Валидация ввода", "Библиотеки криптографии", "Наименьшие привилегии", "Статический анализатор кода", "Веб-приложения", "Фреймворки Python", "Django", "Flash", "Система аутентификации", "Хеширование паролей", "Система шаблонов", "Управление сеансами", "MarkupSafe", "WTForms", "Мигалка", "Защита данных", "Уязвимости", "Безопасное кодирование", "Python", "Риски безопасности", "Валидация ввода", "Библиотеки криптографии", "Наименьшие привилегии", "Статический анализатор кода", "Веб-приложения", "Фреймворки Python", "Django", "Flash", "Система аутентификации", "Хеширование паролей", "Система шаблонов", "Управление сеансами", "MarkupSafe", "WTForms", "Мигалка", "Защита данных", "Уязвимости", "Безопасность кода на языке Python", "Обзор кода", "Средства статического анализа", "Безопасная веб-разработка", "Практика безопасного кодирования", "Уязвимые места в системе безопасности", "Лучшие практики обеспечения безопасности кода", "Шифрование данных", "Принцип наименьших привилегий", "Анализ кода", "Веб-безопасность"]
cover: "/img/cover/A_cartoon_shield_with_the_word_Python.png"
coverAlt: "Мультяшный щит с написанным на нем словом Python, символизирующим стандарты безопасного кодирования"
coverCaption: ""
---
 Практика применения стандартов безопасного кодирования в Python**.

### 1. Валидация ввода

### Валидация ввода

Вводимые пользователем данные часто являются значительным источником рисков безопасности. **Валидация ввода** - это процесс проверки того, что вводимые пользователем данные соответствуют ожидаемым критериям и безопасны для использования в приложении.

Например, при вводе пользователем номера кредитной карты он должен содержать только цифры и никаких специальных символов. Для проверки вводимых данных разработчики могут использовать встроенные функции, такие как `isdigit()` или регулярных выражений, чтобы убедиться, что вводимые данные соответствуют ожидаемым критериям.

```python
import re

def validate_input(input_string):
    """
    Function to validate input using regular expressions.
    """
    pattern = r"^[0-9]+$"
    if re.match(pattern, input_string):
        return True
    else:
        return False
```

### 2. Избегайте использования небезопасных функций

В Python есть несколько функций, которые при неосторожном использовании могут быть уязвимы для проблем безопасности. Такие функции, как `exec()` `eval()` и `pickle` может позволить злоумышленникам выполнить вредоносный код. Разработчикам следует **избегать использования этих функций** или применять их с осторожностью, ограничивая входные параметры и используя их только в случае необходимости.

Например, вместо использования `eval()` для преобразования строки в целое число, разработчикам следует использовать функцию `int()` функция.
```py
# Instead of using eval function
x = eval('10')

# Use int function
x = int('10')
```

### 3. Использование библиотек криптографии

**Библиотеки криптографии**, такие как [`cryptography`](https://pypi.org/project/cryptography/) and [`pycryptodome`](https://pypi.org/project/pycryptodome/) обеспечивают безопасный способ выполнения операций шифрования и дешифрования. Используйте эти библиотеки вместо создания собственных методов шифрования, которые могут быть подвержены уязвимостям.

Например, для шифрования пароля используйте библиотеку [`cryptography`](https://pypi.org/project/cryptography/) библиотеки следующим образом:
```py
from cryptography.fernet import Fernet

def encrypt_password(password):
    """
    Function to encrypt password using cryptography library.
    """
    key = Fernet.generate_key()
    f = Fernet(key)
    encrypted_password = f.encrypt(password.encode('utf-8'))
    return encrypted_password

password = "mypassword"
encrypted_password = encrypt_password(password)
```
Сайт `Fernet` объект генерирует ключ, который используется для шифрования пароля с помощью `encrypt()` метод.

### 4. Следовать принципу наименьших привилегий

**Принцип наименьших привилегий** - это лучшая практика обеспечения безопасности, которая ограничивает пользователей или процессы минимальным уровнем доступа, необходимым для выполнения их функций. Разработчики должны следовать этому принципу при написании кода, чтобы минимизировать последствия нарушения безопасности.

Например, если приложению требуется доступ к базе данных только для чтения, то вместо учетной записи с полными правами следует использовать учетную запись базы данных с правами только для чтения. Это снижает риск того, что злоумышленник воспользуется приложением для изменения или удаления данных.

### 5. Обновление библиотек и фреймворков

Библиотеки и фреймворки могут содержать уязвимости в системе безопасности, которые могут быть использованы злоумышленниками. Разработчикам следует **обновлять свои библиотеки и фреймворки** до последней версии, чтобы избежать потенциальных проблем с безопасностью.

Например, если в приложении используется сторонняя библиотека, такая как [`Requests`](https://pypi.org/project/requests/) в которой имеется уязвимость, разработчику следует обновить библиотеку до последней версии, в которой эта уязвимость устранена.

### 6. Использование статического анализатора кода

**Статический анализатор кода** - это инструмент, позволяющий выявить потенциальные уязвимости безопасности в коде до его выполнения. Для этого можно использовать такие инструменты, как [`bandit`](https://pypi.org/project/bandit/), [`Pylint`](https://pypi.org/project/pylint/), and [`Pyflakes`](https://pypi.org/project/pyflakes/) для обнаружения проблем безопасности в коде и их устранения до развертывания.

Например, [`bandit`](https://pypi.org/project/bandit/) это популярный статический анализатор кода, который проверяет код на языке Python на наличие потенциальных уязвимостей. Он позволяет обнаружить такие проблемы, как жестко заданные пароли, SQL-инъекции и использование небезопасных функций.

### 7. Использование методов безопасного кодирования для веб-приложений

Веб-приложения подвержены нескольким рискам безопасности, таким как межсайтовый скриптинг, инъекции SQL и инъекции команд. Для обеспечения безопасности веб-приложений разработчикам следует **следовать практикам безопасного кодирования**, таким как валидация ввода, кодирование вывода и параметризованные запросы.

Например, при написании SQL-запросов следует использовать **параметризованные запросы**, а не конкатенировать вводимые пользователем данные с запросом. Параметризованные запросы предотвращают атаки SQL-инъекций, поскольку рассматривают вводимые пользователем данные как данные, а не как исполняемый код.

```py
# Instead of this
query = "SELECT * FROM users WHERE username = '" + username + "';"

# Use parameterized query
query = "SELECT * FROM users WHERE username = %s;"
cursor.execute(query, (username,))
```
Разработчики также должны **проверять все вводимые пользователем данные**, кодировать выходные данные и использовать HTTPS для шифрования данных, передаваемых по сети.

## Стандарты безопасного кодирования для фреймворков Python

Такие фреймворки Python, как [Django](https://www.djangoproject.com/) and [Flask](https://flask.palletsprojects.com/) имеют свои стандарты безопасного кодирования. Разработчики должны следовать этим стандартам при разработке приложений с использованием этих фреймворков. Ниже приведены некоторые стандарты безопасного кодирования для фреймворков Python:

### 1. [Django](https://www.djangoproject.com/)

[Django](https://www.djangoproject.com/) is a popular web framework for Python. Here are some secure coding standards for [Django](https://www.djangoproject.com/)

- Использование [Django](https://www.djangoproject.com/) встроенную систему **аутентификации** вместо создания собственной системы аутентификации.
- Использование [Django](https://www.djangoproject.com/) встроенные **функции хеширования паролей** вместо создания собственных методов хеширования паролей.
- Использование [Django](https://www.djangoproject.com/) **шаблонная система** для обеспечения безопасности вывода и отсутствия уязвимостей межсайтового скриптинга.

Например, для использования [Django](https://www.djangoproject.com/)'s built-in password hashing function, use the `make_password()` function from the ` модуль.

```python
from [Django](https://www.djangoproject.com/).contrib.auth.hashers import make_password

password = "mypassword"
hashed_password = make_password(password)
```

### 2. [Flask](https://flask.palletsprojects.com/)
[Flask](https://flask.palletsprojects.com/) is a micro web framework for Python. Here are some secure coding standards for [Flask](https://flask.palletsprojects.com/)

- Использование [Flask](https://flask.palletsprojects.com/) встроенная **система управления сеансами** для обеспечения безопасной работы с сеансами.
- Использование [Flask](https://flask.palletsprojects.com/)'s [`MarkupSafe`](https://pypi.org/project/MarkupSafe/) библиотеки, чтобы гарантировать безопасность вывода и отсутствие уязвимостей межсайтового скриптинга.
- Использование [Flask](https://flask.palletsprojects.com/)'s [`WTForms`](https://pypi.org/project/WTForms/) библиотека для обработки проверки ввода пользователя и обеспечения безопасности вводимых данных.
- Использование [Flask](https://flask.palletsprojects.com/)'s [`Blinker`](https://pypi.org/project/blinker/) библиотека для безопасной обработки сигналов.

Например, для использования [Flask](https://flask.palletsprojects.com/)'s [`MarkupSafe`](https://pypi.org/project/MarkupSafe/) библиотеку, импортировать ее и использовать для исключения HTML-тегов из выходных данных.
```py
from markupsafe import escape

@app.route('/')
def hello():
    name = "<script>alert('xss');</script>"
    return 'Hello, ' + escape(name)
```
______

## Использование полученных знаний и что делать дальше?

1. **Начните внедрять эти лучшие практики в свой Python-код уже сегодня**, чтобы минимизировать риск нарушения безопасности и защитить конфиденциальные данные. Начать можно с определения областей кода, подверженных рискам безопасности, таких как проверка ввода, хеширование паролей и управление сеансами. Затем можно применить лучшие практики, подобные тем, которые рассматриваются в этой статье, для защиты кода. Например, можно использовать встроенные в Python регулярные выражения для проверки вводимых пользователем данных или использовать безопасную библиотеку хэширования паролей, такую как [`bcrypt`](https://pypi.org/project/bcrypt/)

2. **Проанализируйте существующую кодовую базу на предмет потенциальных уязвимостей** и используйте статические анализаторы кода, такие как [`bandit`](https://pypi.org/project/bandit/), [`Pylint`](https://pypi.org/project/pylint/), and [`Pyflakes`](https://pypi.org/project/pyflakes/) для обнаружения и устранения любых проблем. Для выявления проблем безопасности, которые статический анализатор кода может не обнаружить, можно также использовать ручной просмотр кода. Ищите такие распространенные уязвимости, как SQL-инъекции, межсайтовый скриптинг и проблемы с проверкой ввода. После выявления потенциальных уязвимостей безопасности можно использовать лучшие практики для их устранения.

3. **Следите за последними практиками и инструментами** для обеспечения безопасности и отсутствия уязвимостей в коде. Следите за блогами по безопасности, посещайте конференции и участвуйте в онлайн-сообществах, чтобы быть в курсе последних тенденций и практик в области безопасности. Постоянно обновляйте библиотеки и фреймворки, чтобы убедиться, что вы используете последние безопасные версии.

4. **Вступайте в онлайн-сообщества и посещайте мероприятия**, где вы можете узнать от экспертов и других разработчиков о методах безопасного кодирования на Python. Найдите в Интернете сообщества и форумы, где можно обсудить вопросы безопасности с другими разработчиками, узнать о новых тенденциях в области безопасности и поделиться своими знаниями. Посещайте такие мероприятия, как конференции, вебинары и встречи, чтобы получить знания от экспертов по безопасности и других разработчиков.

5. **Поделитесь этими лучшими практиками со своей командой или коллегами**, чтобы способствовать развитию культуры безопасности и побудить других к внедрению безопасных методов кодирования в своих Python-проектах. Организуйте тренинги по безопасности, делитесь статьями и ресурсами по безопасному кодированию и показывайте пример, внедряя эти лучшие практики в свой собственный код. Развивая культуру безопасности, вы сможете обеспечить безопасность и отсутствие уязвимостей в коде вашей команды.


## Заключение

Стандарты безопасного кодирования необходимы для обеспечения безопасности, надежности и отсутствия уязвимостей в коде. Python - популярный язык программирования, который требует от разработчиков соблюдения стандартов безопасного кодирования для предотвращения рисков безопасности. Соблюдение лучших практик, таких как валидация ввода, отказ от небезопасных функций, использование криптографических библиотек, обновление библиотек и фреймворков, позволяет разработчикам гарантировать безопасность и отсутствие уязвимостей в коде. При использовании фреймворков Python разработчики должны следовать стандартам безопасного кодирования, рекомендованным фреймворком.

Внедрение стандартов безопасного кодирования - это непрерывный процесс, требующий от разработчиков постоянного обновления передовых методов и средств обеспечения безопасности. Внедрение стандартов безопасного кодирования в процесс разработки позволяет минимизировать риск нарушения безопасности и защитить конфиденциальные данные.

